"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[9324,5840,7290,2038,6385,7222,8652],{95840:function(t,e,r){r.r(e);const n={data(){return{config:{primeContainer:{selector:"data-dr-prime-container",current:""},container:{selector:"data-dr-container",current:""},item:{selector:"data-dr-item",current:""},handle:{selector:"data-dr-handle",current:""},active:{selector:"data-dr-item-active",current:""},target:{selector:"",current:""},back:{selector:"data-dr-back",current:""},isInsertBefore:!1},needToInsert:!0}},mounted(){this.initDragAndDrop()},updated(){this.initDragAndDrop()},methods:{initDragAndDrop(){const t=document.querySelectorAll("["+this.config.container.selector+"]");t.forEach((t=>{t.addEventListener("dragenter",this.onContainerDragEnter),t.querySelectorAll("["+this.config.item.selector+"]").forEach((t=>{t.hasAttribute(this.config.item.selector)&&(t.addEventListener("mousedown",this.setDraggable),t.addEventListener("dragstart",this.onDragStart),t.addEventListener("dragend",this.onDragEnd),t.addEventListener("dragleave",this.onDragLeave),t.addEventListener("dragover",this.onDragOver),this.addBackElement(t))}))}))},addBackElement(t){if(t.querySelector("["+this.config.back.selector+"]"))return;t.style.position="relative";let e=document.createElement("div");e.style.height="100%",e.style.width="100%",e.style.top=0,e.style.left=0,e.style.position="absolute",e.style.zIndex=-1,e.setAttribute(this.config.back.selector,""),t.appendChild(e)},onContainerDragEnter(t){if(t.stopPropagation(),!this.config.active.current)return;let e=this.config.container;if(e.current!==t.currentTarget&&e.current.getAttribute(e.selector)===t.currentTarget.getAttribute(e.selector))try{this.config.container.current=t.currentTarget}catch(r){return r}},onDragLeave(t){const e=document.elementsFromPoint(t.clientX,t.clientY);if(-1===e.findIndex((t=>this.config.target.current===t)))try{this.config.target.current.firstElementChild.style.boxShadow="",this.config.target.current.firstElementChild.style.marginBottom="1rem",this.config.target.current.firstElementChild.style.top=0}catch{return 0}},setDraggable(t){t.stopPropagation(),t.target.hasAttribute(this.config.handle.selector)&&(this.addBackElement(t.currentTarget),this.config.handle.current=t.target,this.config.active.current=t.currentTarget,this.config.container.current=this.config.active.current.parentNode,this.config.active.current.setAttribute("draggable",!0))},onDragStart(t){t.stopPropagation();try{this.config.active.current.setAttribute(this.config.active.selector,!0),this.config.active.current.classList.remove("wink"),this.config.primeContainer.current=this.config.active.current.parentNode}catch(e){return e}},onDragEnd(t){if(t.stopPropagation(),!this.config.active.current)return;const e=document.elementFromPoint(t.clientX,t.clientY),r=e.hasAttribute("data-dr-container"),n=e.getAttribute("data-dr-container"),i=this.config.active.current.parentNode,a=i.getAttribute("data-dr-container");let c;this.needToInsert&&(r&&n===a?(c=e.lastChild,e.appendChild(this.config.active.current)):this.config.container.current&&this.config.target.current&&(c=this.config.isInsertBefore?this.config.target.current:this.config.target.current.nextElementSibling,this.config.container.current.insertBefore(this.config.active.current,c))),this.customEndHandler(),this.config.target.current&&(this.config.target.current.firstElementChild.style.boxShadow="",this.config.target.current.firstElementChild.style.marginBottom="1rem",this.config.target.current.firstElementChild.style.top=0),this.config.active.current&&(this.config.active.current.removeAttribute(this.config.active.selector),this.config.active.current.classList.add("wink"),this.config.active.current.setAttribute("draggable",!1),this.config.active.current="")},onDragOver(t){t.stopPropagation(),t.preventDefault();const e=t.currentTarget;let r=e.parentNode,n=this.config.container.current;const i=r.getAttribute("data-dr-container"),a=this.config.container.current?this.config.container.current.getAttribute("data-dr-container"):"";if(i&&a){if(i!==a)return;this.config.container.current=r}else if(r!==n)return;const c=this.config.active.element!==e&&e.hasAttribute(this.config.item.selector);c&&(this.getInsertBefore(t),this.config.target.current=e,this.config.isInsertBefore&&this.config.target.current?(this.config.target.current.firstElementChild.style.boxShadow=" 0 -10px 5px rgba(0, 0, 0, 0.25)",this.config.target.current.firstElementChild.style.top="34px",this.config.target.current.firstElementChild.style.marginBottom="1rem",this.config.target.current.firstElementChild.style.transition="all 0.15s ease-in-out"):this.config.target.current&&(this.config.target.current.firstElementChild.style.boxShadow=" 0 10px 5px rgba(0, 0, 0, 0.25)",this.config.target.current.firstElementChild.style.top="0",this.config.target.current.firstElementChild.style.marginBottom="50px",this.config.target.current.firstElementChild.style.transition="all 0.15s ease-in-out"))},getInsertBefore(t){const e=t.currentTarget.querySelector("["+this.config.back.selector+"]");let r;e&&(r=e.getBoundingClientRect(),t.clientX>=r.x&&t.clientX<=r.right&&t.clientY>r.y&&t.clientY<=r.bottom&&(this.config.isInsertBefore=t.clientY-r.y<r.height/2))},customEndHandler(){console.log("Drag&Drop done - custom logic")}},beforeUnmount(){document.removeEventListener("mousedown",this.setDraggable),document.removeEventListener("dragstart",this.onDragStart),document.removeEventListener("dragend",this.onDragEnd),document.removeEventListener("dragover",this.onDragOver)}};e["default"]=n},74075:function(t,e,r){r.r(e),r.d(e,{default:function(){return p}});var n=r(73396),i=r(87139);const a={id:"pageContainer",class:"mt-4"},c=["id"],s=["id"],o=["data-dr-item","id"];function l(t,e,r,l,g,d){return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",{class:"row",id:"pageNum_"+d.activePage+"_div"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.panelsMetadata,((t,e)=>((0,n.wg)(),(0,n.iD)("section",{key:e,"data-dr-container":"section",id:"col_"+d.activePage+"_"+e,class:(0,i.C_)(d.columnsClass)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.panels,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:e,"data-dr-item":t,id:t},[((0,n.wg)(),(0,n.j4)((0,n.LL)(d.resolveDashlet(d.panelsData[t].type)),{data:d.panelsData[t],lockHomepage:r.focusData.lock_homepage,activePage:d.activePage},null,8,["data","lockHomepage","activePage"]))],8,o)))),128))],10,s)))),128))],8,c)])}var g=r(95840),d=r(72318),u=r(76673),h={name:"HomeListBody",data(){return{panelsOrder:[],needToInsert:!1}},mixins:[g["default"]],props:{focusData:{type:Object},getData:{type:Object}},computed:{columnsClass(){let t=this.focusData.pageData[this.focusData.activePage].columnsAmount,e="col-lg-12";return t&&Number.isInteger(t)&&t>0&&t<=12&&(e="col-lg-"+Math.trunc(12/t)),e},activePage(){return this.focusData.activePage},pageData(){return this.focusData.pageData},panelsData(){return this.focusData.viewData.panelsData},panelsMetadata(){return this.focusData.viewData.panelsMetadata["page_"+this.activePage]}},methods:{resolveDashlet(t){return Object.hasOwn(u["default"],t)?u["default"][t]:d["default"]},customEndHandler(){this.setDragPanelOrder()},setDragPanelOrder(){let t={activeId:this.config.active.current.getAttribute(this.config.item.selector),targetId:this.config.target.current.getAttribute(this.config.item.selector),previousCol:Number(this.config.primeContainer.current.id.slice(-1)),targetCol:Number(this.config.container.current.id.slice(-1)),isInsertBefore:this.config.isInsertBefore};this.$store.dispatch("focus/setDashletsOrder",t)}}},f=r(40089);const m=(0,f.Z)(h,[["render",l]]);var p=m},96385:function(t,e,r){r.r(e),r.d(e,{default:function(){return u}});var n=r(73396),i=r(87139);const a=t=>((0,n.dD)("data-v-4bd0c545"),t=t(),(0,n.Cn)(),t),c=a((()=>(0,n._)("i",{class:"fas fa-3x fa-sync-alt fa-spin"},null,-1))),s=[c];function o(t,e,r,a,c,o){return r.isShow?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"tab-preloader flex-column justify-content-center align-items-center",style:(0,i.j5)(c.styleObj)},s,4)):(0,n.kq)("",!0)}var l={name:"TabPreloader2",props:{isShow:{type:Boolean}},data(){return{styleObj:{height:"10px",width:"10px",opacity:0}}},updated(){this.updateStyle()},mounted(){this.updateStyle()},methods:{updateStyle(){let t=this.$el.parentElement,e=window.getComputedStyle(t).backgroundColor,r=t.getBoundingClientRect();r.height<80&&(t.style.minHeight="80px"),this.styleObj.backgroundColor=e,this.styleObj.height=r.height-2+"px",this.styleObj.width=r.width-2+"px",this.isShow?this.styleObj.opacity=1:this.styleObj.opacity=0}}},g=r(40089);const d=(0,g.Z)(l,[["render",o],["__scopeId","data-v-4bd0c545"]]);var u=d}}]);