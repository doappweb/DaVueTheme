"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[4406,3312],{93312:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});a(82801),a(61295),a(57658);var s={name:"AbstractActivities",beforeMount(){this.extendDefaultReminder()},computed:{user(){return this.$store.state.user.data},scheduler(){return this.$store.state.focus.data.pageData.reminderInvite&&this.$store.state.focus.data.pageData.reminderInvite.users_arr?this.$store.state.focus.data.pageData.reminderInvite.users_arr:[]},reminders(){return this.$store.state.focus.data.beanData.reminders.value},remindersData(){if(this.reminders.remindersData){let e=structuredClone(this.reminders.remindersData);for(let t of e)"1"===t.popup?t.popup=!0:t.popup=!1,"1"===t.email?t.email=!0:t.email=!1;return JSON.stringify(e)}return[]},reminderInvite(){let e={},t="";this.scheduler.forEach((a=>{t=a.module?"Users"===a.module||"Leads"===a.module||"Contacts"===a.module?a.module:a.module+"s":a.moduleName,e[t]||(e[t]=[]),e[t].push(a.fields.id)}));for(let a in e)e[a]=e[a].join();return e}},methods:{extendDefaultReminder(){let e=Object.assign({},this.reminders);e.remindersDefaultValuesData["invitees"]=[{id:"",module:"Users",module_id:this.user.id,value:this.user.firstName+" "+this.user.lastName}],this.$store.dispatch("focus/updateModelValue",{name:"reminders",value:e})},addPopup(e,t){this.$store.dispatch("popup/setSize",t),this.$store.dispatch("popup/fill",e),this.$store.dispatch("popup/show")}}};const r=s;var d=r},4406:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var s=a(73396),r=a(87139);const d=e=>((0,s.dD)("data-v-3dcf9821"),e=e(),(0,s.Cn)(),e),i={class:"card-header"},l={class:"card-title"},n=d((()=>(0,s._)("div",{class:"card-tools"},[(0,s._)("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse",title:"Collapse"},[(0,s._)("i",{class:"fas fa-minus"})])],-1))),u={class:"card-body"},o=d((()=>(0,s._)("i",{class:"fas fa-plus"},null,-1)));function p(e,t,a,d,p,c){return(0,s.wg)(),(0,s.iD)("div",{class:(0,r.C_)(e.reminders.remindersData.length?"col-lg-8":"col-lg-12 appear")},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.fieldMap,((d,p)=>((0,s.wg)(),(0,s.iD)("div",{key:p,class:(0,r.C_)(["card card-primary card-outline",c.getPanelClass(p)])},[(0,s._)("div",i,[(0,s._)("h3",l,(0,r.zw)(e.DOAPP.utils.translate(p,a.module)),1),n]),(0,s._)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"row"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},["reminders"!==t?((0,s.wg)(),(0,s.j4)((0,s.LL)(a.fieldTemplate(a.beanData[t],a.panelsFields[p][t])),{key:0,name:t,module:a.module,record:a.record,metadata:a.panelsFields[p][t],beanData:a.beanData},null,8,["name","module","record","metadata","beanData"])):(0,s.kq)("",!0)],64)))),128))])))),128)),p.includes("INFORMATION")?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-info float-right",onClick:t[0]||(t[0]=(...e)=>c.openPopup&&c.openPopup(...e))},[o,(0,s.Uk)(" "+(0,r.zw)(e.DOAPP.utils.translate("LBL_REMINDERS_ADD_REMINDER",a.module)),1)])):(0,s.kq)("",!0)])],2)))),128)),(0,s.WI)(e.$slots,"default",{},void 0,!0)],2)}var c=a(93312),m={name:"MainActivitiesPanel",extends:c["default"],props:{panelsMetadata:{type:Object,required:!0},fieldMap:{type:Object,required:!0},beanData:{type:Object,required:!0},panelsFields:{type:Object,required:!0},module:{type:String,required:!0},record:{type:String},fieldTemplate:{type:Function,required:!0}},methods:{openPopup(){let e={type:"Reminder",header:{data:{module:this.module,title:"LBL_REMINDERS_ADD_REMINDER"},show:!0},body:{data:{reminders:this.reminders,module:this.module,user:this.user},show:!0},footer:{data:{}}};this.addPopup(e,"lg")},getPanelClass(e){return this.panelsMetadata[e]&&this.panelsMetadata[e].panelDefault?this.panelsMetadata[e].panelDefault:""}}},h=a(40089);const f=(0,h.Z)(m,[["render",p],["__scopeId","data-v-3dcf9821"]]);var D=f}}]);