"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[3190,8819,7290,855,4765,673,3265],{78707:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var s=a(73396);const o={class:"content-wrapper"},l={class:"content-header py-2"},n={class:"container-fluid"},i={class:"content"},d={class:"container-fluid"},r={class:"content"},u={class:"container-fluid"},c={class:"content"},p={class:"container-fluid"},m=(0,s._)("section",{class:"content"},[(0,s._)("div",{class:"container-fluid"})],-1);function _(e,t,a,_,h,f){const v=(0,s.up)("ListTitle"),w=(0,s.up)("ListHead"),g=(0,s.up)("ListBody"),b=(0,s.up)("MassActionModal");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("section",l,[(0,s._)("div",n,[(0,s.Wm)(v)])]),(0,s._)("section",i,[(0,s._)("div",d,[(0,s.Wm)(w)])]),(0,s._)("section",r,[(0,s._)("div",u,[(0,s.Wm)(g)])]),(0,s._)("section",c,[(0,s._)("div",p,[(0,s.Wm)(b)])]),m])}var h=a(43265),f=a(51173),v=a(7991),w=a(64765),g=a(90673),b={extends:h["default"],name:"AppListActionPage",components:{ListTitle:w["default"],MassActionModal:g["default"],ListHead:f["default"],ListBody:v["default"]},provide(){return{view:"listview",state:"focus"}},mounted(){console.log("AppListActionPage")}},y=a(40089);const D=(0,y.Z)(b,[["render",_]]);var L=D},64765:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var s=a(73396),o=a(87139);const l={class:"row"},n={class:"col-auto ml-auto"},i={class:"breadcrumb"},d={class:"breadcrumb-item"},r={class:"breadcrumb-item active"};function u(e,t,a,u,c,p){const m=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",n,[(0,s._)("ol",i,[(0,s._)("li",d,[(0,s.Wm)(m,{to:"?module=Home&action=ListView"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.DOAPP.utils.translate("LBL_BROWSER_TITLE")),1)])),_:1})]),(0,s._)("li",r,(0,o.zw)(e.DOAPP.utils.translate("LBL_MODULE_NAME",e.$route.query.module)),1)])])])}var c={name:"ListTitle"},p=a(40089);const m=(0,p.Z)(c,[["render",u]]);var _=m},90673:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var s=a(73396),o=a(87139);const l={class:"modal fade",id:"MAmodalLoader"},n={class:"modal-content"},i={class:"modal-header"},d={class:"modal-body"},r={class:"modal-footer"};function u(e,t,a,u,c,p){return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",{id:"MAmodalDialog",class:(0,o.C_)(["modal-dialog",p.sizeClass])},[(0,s._)("div",n,[(0,s._)("div",i,[p.section.header.show?((0,s.wg)(),(0,s.j4)((0,s.LL)(c.template.header),{key:0,section:p.section.header},null,8,["section"])):(0,s.kq)("",!0)]),(0,s._)("div",d,[p.section.body.show?((0,s.wg)(),(0,s.j4)((0,s.LL)(c.template.body),{key:0,section:p.section.body},null,8,["section"])):(0,s.kq)("",!0)]),(0,s._)("div",r,[p.section.footer.show?((0,s.wg)(),(0,s.j4)((0,s.LL)(c.template.footer),{key:0,section:p.section.footer},null,8,["section"])):(0,s.kq)("",!0)])])],2)])}var c=a(24239),p=a(68353),m={name:"MassActionModal",data(){return{template:{header:!1,body:!1,footer:!1}}},computed:{section(){return this.$store.state.mass_actions.data},show(){return this.$store.state.mass_actions.data.show},type(){return this.$store.state.mass_actions.data.type},sizeClass(){let e="";return""!==this.$store.state.mass_actions.data.size&&(e="modal-"+this.$store.state.mass_actions.data.size),e}},watch:{show(e,t){!0===e&&!1===t?(this.setTemplate(),this.showPopup()):!1===e&&!0===t&&this.hidePopup()}},methods:{setTemplate(){this.template.header=(0,s.Fl)((()=>p["default"][this.type+"Header"]??p["default"].InfoHeader)),this.template.body=(0,s.Fl)((()=>p["default"][this.type+"Body"]??p["default"].InfoBody)),this.template.footer=(0,s.Fl)((()=>p["default"][this.type+"Footer"]??p["default"].InfoFooter))},showPopup(){window.$("#MAmodalLoader").modal("show").on("hidden.bs.modal",(function(){c["default"].commit("mass_actions/RESET_POPUP"),window.$(this).off("hidden.bs.modal")})),window.$("#MAmodalLoader").modal("show").on("shown.bs.modal",(function(){window.$(this).off("shown.bs.modal")}))},hidePopup(){window.$("#MAmodalLoader").modal("hide")}}},_=a(40089);const h=(0,_.Z)(m,[["render",u]]);var f=h},43265:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var s={name:"abstractActionPage",props:{windowSize:{type:[Object]}},provide(){return{view:"",state:"focus"}},mounted(){},methods:{}};const o=s;var l=o},45362:function(e,t,a){a.r(t),a.d(t,{default:function(){return oe}});var s=a(73396),o=a(87139),l=a(49242);const n={class:"content-wrapper"},i={class:"content-header"},d={class:"container-fluid"},r={class:"row"},u={class:"col-auto mr-auto"},c={class:"mt-2"},p={class:"d-md-flex"},m={class:"flex-lg-grow-1 mb-2 mb-md-0 mr-md-2"},_={class:"col-lg-auto ml-auto px-0"},h={class:"content"},f={class:"container-fluid"},v={class:"card"},w={class:"card-body"},g={class:"row"},b={class:"form-group col-md-6 col-lg-3"},y={class:"text-truncate mb-2"},D={for:"name",class:"truncate-label"},L={id:"display_tabs_td"},C=["value"],A={class:"btn-group mt-1 d-flex flex-column align-self-end"},P=(0,s._)("i",{class:"fas fa-arrow-right"},null,-1),O=[P],B={class:"form-group col-md-12 col-lg-9"},M={class:"text-truncate mb-2"},F={for:"name",class:"truncate-label"},T={name:"DedupSetup",id:"DedupSetup"},k=(0,s._)("input",{type:"hidden",name:"module",value:"MergeRecords"},null,-1),z=["value"],S=["value"],E=(0,s._)("input",{type:"hidden",name:"action",value:"Step2"},null,-1),x=["value"],R=["value"],$=(0,s._)("input",{type:"hidden",name:"return_action",value:"DetailView"},null,-1),G=(0,s._)("input",{type:"hidden",name:"dedup_fields",value:""},null,-1),U=["value"],V={class:"input-group col-md-6 col-lg-3"},j=["onUpdate:modelValue"],I={class:"col-md-6 col-lg-3"},H=["name","onUpdate:modelValue"],N=["label","value"],W={class:"col-md-6 col-lg-3"},q=["name","onUpdate:modelValue"],Z={class:"input-group-append"},K=["onClick"],Y=(0,s._)("i",{class:"fas fa-minus"},null,-1),X=[Y];function J(e,t,a,P,Y,J){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("section",i,[(0,s._)("div",d,[(0,s._)("div",r,[(0,s._)("div",u,[(0,s._)("h1",null,(0,o.zw)(e.pageData?.recordName),1),(0,s._)("p",null,(0,o.zw)(e.DOAPP.utils.translate("LBL_STEP1_DIRECTIONS","MergeRecords")),1)])]),(0,s._)("div",c,[(0,s._)("div",p,[(0,s._)("div",m,[(0,s._)("button",{type:"button",class:(0,o.C_)(["bg-danger",J.displayClass()]),onClick:t[0]||(t[0]=(...e)=>J.denyBtm&&J.denyBtm(...e))},(0,o.zw)(e.DOAPP.utils.translate("LBL_CANCEL_BUTTON_LABEL","MergeRecords")),3)]),(0,s._)("div",_,[(0,s._)("div",{class:(0,o.C_)(["w-100",J.actionBtnClass.mainGroup])},[(0,s._)("button",{type:"button",class:(0,o.C_)(["bg-success",J.displayClass()]),form:"DedupSetup",onClick:t[1]||(t[1]=(...e)=>J.nextBtm&&J.nextBtm(...e))},(0,o.zw)(e.DOAPP.utils.translate("LBL_NEXT_STEP_BUTTON_LABEL","MergeRecords")),3)],2)])])])])]),(0,s._)("section",h,[(0,s._)("div",f,[(0,s._)("div",v,[(0,s._)("div",w,[(0,s._)("div",g,[(0,s._)("div",b,[(0,s._)("div",y,[(0,s._)("label",D,(0,o.zw)(e.DOAPP.utils.translate("LBL_AVAIL_FIELDS","MergeRecords"))+":",1)]),(0,s._)("div",L,[(0,s.wy)((0,s._)("select",{id:"display_tabs",size:"7",class:"templateGroupChooser form-control v-scroll","onUpdate:modelValue":t[2]||(t[2]=e=>Y.selectedField=e)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(J.fieldsToCompare,((e,t)=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,o.zw)(e),9,C)))),128))],512),[[l.bM,Y.selectedField]])]),(0,s._)("div",A,[(0,s._)("button",{type:"button",class:"btn btn-sm btn-outline-secondary p-0",id:"chooser_display_tabs_left_to_right",onClick:t[3]||(t[3]=e=>J.showField(this.selectedField))},O)])]),(0,s._)("div",B,[(0,s._)("div",M,[(0,s._)("label",F,(0,o.zw)(e.DOAPP.utils.translate("LBL_FILTER_COND","MergeRecords"))+":",1)]),(0,s._)("form",T,[k,(0,s._)("input",{type:"hidden",name:"merge_module",value:e.getData.return_module},null,8,z),(0,s._)("input",{type:"hidden",name:"record",value:e.getData.record},null,8,S),E,(0,s._)("input",{type:"hidden",name:"return_module",value:e.getData.return_module},null,8,x),(0,s._)("input",{type:"hidden",name:"return_id",value:e.getData.record},null,8,R),$,G,(0,s._)("input",{type:"hidden",name:"num_fields",value:Y.num_fields},null,8,U),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(J.preLoadedFields,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,class:"row form-group"},[(0,s._)("div",V,[(0,s.wy)((0,s._)("input",{class:"form-control form-control-border","onUpdate:modelValue":e=>t.label=e,readonly:""},null,8,j),[[l.nr,t.label]])]),(0,s._)("div",I,[(0,s.wy)((0,s._)("select",{class:"form-control form-control-border",name:a+"SearchType","onUpdate:modelValue":e=>t.option=e},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.viewData.operatorOptions,((e,t)=>((0,s.wg)(),(0,s.iD)("option",{key:t,label:e,value:t},(0,o.zw)(e),9,N)))),128))],8,H),[[l.bM,t.option]])]),(0,s._)("div",W,[(0,s.wy)((0,s._)("input",{class:"form-control",name:a+"SearchField","onUpdate:modelValue":e=>t.value=e},null,8,q),[[l.nr,t.value]])]),(0,s._)("div",Z,[(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:e=>J.removeField(a)},X,8,K)])])))),128))])])])])])])])])}a(57658);var Q=a(78707),ee=a(20065),te={extends:Q["default"],name:"MergeRecordsStep1ActionPage",data(){return{selectedField:"",num_fields:0,displayOpt:{addGroup:"",addGroupClass:"",mainGroup:"btn-group",mainGroupClass:""}}},components:{},computed:{...(0,ee.rn)({getData:e=>e.focus.get,beanData:e=>e.focus.data.beanData,pageData:e=>e.focus.data?.pageData,viewData:e=>e.focus.data?.viewData}),params(){return{get:{VueAjax:1,method:"mergeRecords",arg:{action:"Step1",record:this.getData.record,return_module:this.getData.return_module,return_id:this.getData.record,return_action:this.getData.return_action}}}},fieldsToCompare(){return this.viewData?.fieldAvailOptions?this.viewData.fieldAvailOptions:{}},preLoadedFields(){let e=this.viewData?.preLoadedFields?this.viewData.preLoadedFields:{};for(let t of Object.values(e))t.option||(t.option=this.defaultOption);return e},defaultOption(){return Object.keys(this.viewData.operatorOptions)[0]},actionBtnClass(){let e={};return this.windowSize.width>=768?(e.mainGroup="btn-group",e.mainGroupClass=""):(e.mainGroup="",e.mainGroupClass="btn-block"),e}},methods:{showField(e){this.num_fields++,this.preLoadedFields[e]={label:this.fieldsToCompare[e],value:this.beanData[e]},delete this.fieldsToCompare[e]},removeField(e){this.fieldsToCompare[e]=this.preLoadedFields[e].label,delete this.preLoadedFields[e],this.num_fields>0&&this.num_fields--},async getPageData(){let e=await this.$store.dispatch("ajaxGet",this.params,{root:!0});this.$store.commit("focus/setMergeRecordsData",e.data)},displayClass(){let e="btn btn-flat";return!this.DOAPP.utils.isEmpty(this.displayOpt)&&Object.hasOwn(this.displayOpt,"mainGroupClass")&&(e=e+" "+this.displayOpt.mainGroupClass),e},denyBtm(){let e={module:this.getData.return_module,record:this.getData.record,action:this.getData.return_action,return_module:this.getData.module};this.$router.push({path:"/",query:e})},nextBtm(){alert('Action "Step 2" is not ready!')}},beforeMount(){this.getPageData()}},ae=a(40089);const se=(0,ae.Z)(te,[["render",J]]);var oe=se}}]);