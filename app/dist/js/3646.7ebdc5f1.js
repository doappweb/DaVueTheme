"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[3646,3265,5301],{43265:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var o={name:"abstractActionPage",props:{windowSize:{type:[Object]}},provide(){return{view:"",state:"focus"}},mounted(){},methods:{}};const a=o;var i=a},83646:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var o=n(73396);function a(e,t,n,a,i,s){const r=(0,o.up)("Content");return(0,o.wg)(),(0,o.j4)(r)}var i=n(75301),s=n(43265),r={extends:s["default"],name:"ModUsersLoginActionPage",components:{Content:i["default"]}},l=n(40089);const u=(0,l.Z)(r,[["render",a]]);var d=u},75301:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var o=n(73396),a=n(87139);const i=(0,o._)("div",{class:"login-logo"},[(0,o._)("img",{src:"/../../themes/default/images/company_logo.png",alt:"SuiteCRM",style:{margin:"5px 0"}})],-1),s=(0,o._)("div",{class:"d-flex justify-content-center"},[(0,o._)("span",{id:"error",style:{color:"darkred",display:"none"}},"Вы должны указать правильные логин и пароль.")],-1),r={class:"card"},l={class:"card-body login-card-body"},u={role:"form",id:"form"},d=(0,o.uE)('<input type="hidden" name="module" value="Users"><input type="hidden" name="action" value="Authenticate"><input type="hidden" name="return_module" value="Users"><input type="hidden" name="return_action" value="Login"><input type="hidden" name="login_module" value=""><input type="hidden" name="login_action" value=""><input type="hidden" name="login_record" value=""><input type="hidden" name="login_token" value=""><input type="hidden" name="login_oauth_token" value=""><input type="hidden" name="login_mobile" value=""><input type="hidden" name="cant_login" value="" id="cant_login">',11),c={class:"input-group mb-3"},p={value:"en_us"},g={value:"ru_ru"},m=(0,o.uE)('<div class="input-group mb-3"><input type="text" class="form-control" placeholder="Username" required tabindex="1" id="user_name" name="user_name" autocomplete="off" autofocus><div class="input-group-append"><div class="input-group-text"><span class="fas fa-user"></span></div></div></div><div class="input-group mb-3"><input type="password" class="form-control" placeholder="Password" required tabindex="2" id="username_password" name="username_password" autocomplete="off"><div class="input-group-append"><div class="input-group-text"><span class="fas fa-lock"></span></div></div></div>',2),h=["title"];function _(e,t,n,_,f,v){return(0,o.wg)(),(0,o.iD)(o.HY,null,[i,s,(0,o._)("div",r,[(0,o._)("div",l,[(0,o._)("form",u,[d,(0,o._)("div",c,[(0,o._)("select",{onChange:t[0]||(t[0]=(...e)=>v.changeLang&&v.changeLang(...e)),class:"custom-select",name:"login_language"},[(0,o._)("option",p,(0,a.zw)(f.selectLanguages.en_us),1),(0,o._)("option",g,(0,a.zw)(f.selectLanguages.ru_ru),1)],32)]),m,(0,o._)("button",{type:"button",id:"bigbutton",class:"btn btn-block btn-primary",onClick:t[1]||(t[1]=(...e)=>v.postForm&&v.postForm(...e)),title:v.appLang.LNK_RESUME,tabindex:"3",name:"Login"},(0,a.zw)(v.appLang.LNK_RESUME),9,h)])])])],64)}var f=n(91076),v=n(43265),y={extends:v["default"],name:"ModUsersLoginActionPage",data(){return{loginModule:"",loginAction:"",selectLanguages:this.$store.state.app.config.languages}},computed:{appLang(){return"undefined"!==typeof this.$store.state.app.language?this.$store.state.app.language:{}},chosenLang(){return Object.hasOwn(window.sessionStorage,"lang")?window.sessionStorage.getItem("lang"):""}},mounted(){console.log("ModUsersLoginActionPage"),this.setSelect(this.chosenLang),this.$route.query.login_module&&this.$route.query.login_action&&(this.loginModule=`module=${this.$route.query.login_module}`,this.loginAction=`action=${this.$route.query.login_action}`)},methods:{setSelect(e){let t=document.querySelector("select[name=login_language]");t.childNodes.forEach((t=>{t.selected=t.value===e}))},async changeLang(e){let t=e.target.value;console.log("Press change language to ",t),window.sessionStorage.setItem("lang",t),this.$store.commit("app/SET_PAGE_READY",!1),await this.$store.dispatch("getLoginPage",{method:"getInstance",arg:{lang:t}}),console.log("Change language to ",t),this.$store.commit("app/SET_PAGE_READY",!0)},postForm(e){let t=new FormData(e.target.form);f.Z.post("../index.php",t).then((e=>{let t=e.data.split("=data="),n=t.filter((e=>!e.includes("%%%%%%"))),o=JSON.parse(n.join(""));if(!o.app_auth)return document.querySelector("#error").style.display="inline";this.redirect()}))},redirect(){if(this.loginModule&&this.loginAction)return location.replace(`./?${this.loginModule}&${this.loginAction}`);location.replace("./?module=Home&action=ListView")}}},w=n(40089);const b=(0,w.Z)(y,[["render",_]]);var L=b}}]);