"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[8104,5335,3461,7304,1553,9830,6662,1109,1781,1010,6029,3858,9244,3637],{28104:function(t,e,a){a.r(e);var s=a(38556),o=a(88738),n=a(79463),r=a(15335),i=a(3858),u=a(89244),l=a(13461),d=a(79830),h=a(77304),c=a(33248),p=a(56662),m=a(91553),f=a(11781),_=a(1109),D=a(73637),w=a(31010),E=a(56029);e["default"]={SAVE:o["default"],ID_SAVE_HEADER:o["default"],SAVE_AND_CONTINUE:i["default"],AUDIT:r["default"],CANCEL:n["default"],CANCEL_FOOTER:n["default"],DELETE:h["default"],DELETE_BUTTON:h["default"],DUPLICATE:m["default"],DUPLICATE_BUTTON:m["default"],EDIT:d["default"],EDIT_BUTTON:d["default"],edit_button:d["default"],FIND_DUPLICATES:p["default"],CONNECTOR:s["default"],ID_SAVE_SEND_HEADER:u["default"],ID_SAVE_AND_SEND_INVITES_HEADER:u["default"],ID_CLOSE_CREATE_HEADER:l["default"],ID_CLOSE_AND_CREATE_BUTTON:l["default"],ID_CLOSE_AND_CREATE_NEW_HEADER:l["default"],ShowAllFieldsButton:c["default"],massupdate_listview_top:f["default"],delete_listview_top:_["default"],SAVE_FOOTER:D["default"],view_detail:w["default"],view_gantt:E["default"]}},15335:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(73396),o=a(87139);function n(t,e,a,n,r,i){return t.show()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(["",t.displayClass()]),onClick:e[0]||(e[0]=(...t)=>i.open_popup&&i.open_popup(...t))},(0,o.zw)(t.labelResolve()),3)):(0,s.kq)("",!0)}var r=a(38556),i={name:"AuditButton",extends:r["default"],data(){return{forType:{main:!1,other:!0,separate:!1},label:"LNK_VIEW_CHANGE_LOG"}},computed:{linkParams(){return{get:{VueAjax:1,method:"getAuditPopupPicker",arg:{module_name:this.getData.module,record:this.getData.record}}}}},methods:{open_popup(){this.$store.dispatch("popup/setSize","xl"),this.$store.dispatch("popup/getContentAudit",this.linkParams)}}},u=a(40089);const l=(0,u.Z)(i,[["render",n]]);var d=l},13461:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=a(73396),o=a(87139);const n=["form"];function r(t,e,a,r,i,u){return u.show()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(["",t.displayClass()]),form:t.pageData.view,onClick:e[0]||(e[0]=(...t)=>u.customMethod&&u.customMethod(...t))},(0,o.zw)(t.labelResolve()),11,n)):(0,s.kq)("",!0)}var i=a(3858),u={name:"CloseAndCreateCopyButton",extends:i["default"],data(){return{forType:{main:!1,other:!0,separate:!1},label:"LBL_CLOSE_AND_CREATE_BUTTON_TITLE"}},methods:{customMethod(t){this.saveFormAndContinue(t),console.log("TODO: CustomLogic")},show(){let t=!1;return Object.hasOwn(this.forType,this.displayType)&&this.forType[this.displayType]&&"Completed"!==this.$store.state.focus.data.beanData.status.value&&"Held"!==this.$store.state.focus.data.beanData.status.value&&(t=!0),this.$emit("have-button",t),t}}},l=a(40089);const d=(0,l.Z)(u,[["render",r]]);var h=d},77304:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(73396),o=a(87139);function n(t,e,a,n,r,i){return t.show()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(["bg-danger",t.displayClass()]),onClick:e[0]||(e[0]=(...t)=>i.open_popup&&i.open_popup(...t))},(0,o.zw)(t.labelResolve()),3)):(0,s.kq)("",!0)}a(57658);var r=a(38556),i={name:"DeleteButton",extends:r["default"],data(){return{forType:{main:!1,other:!1,separate:!0},label:""}},methods:{open_popup(){this.$store.dispatch("popup/setSize","sm"),this.$store.dispatch("popup/fill",{type:"confirm",header:{show:!1,data:{}},body:{show:!0,data:{pageData:{bean:{moduleName:this.getData.module}},content:{text:this.DOAPP.utils.translate("NTC_DELETE_CONFIRMATION")}}},footer:{show:!0,data:{onConfirm:this.deleteItem,lblConfirm:this.DOAPP.utils.translate("LBL_EMAIL_YES"),lblRefuse:this.DOAPP.utils.translate("LBL_EMAIL_NO")}}}),this.$store.dispatch("popup/show")},async deleteItem(){console.log("deleteItem");let t=new FormData;t.append("module",this.getData.module),t.append("record",this.getData.record),t.append("action","Delete"),await this.$store.dispatch("ajaxPost",{data:t,sanitize:!1}),window.$("#modalLoader").modal("hide"),this.$router.push({path:"/",query:{module:this.getData.module,action:"ListView"}})}}},u=a(40089);const l=(0,u.Z)(i,[["render",n]]);var d=l},91553:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(73396),o=a(87139);function n(t,e,a,n,r,i){return t.show()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(t.displayClass()),onClick:e[0]||(e[0]=(...t)=>i.duplicateItem&&i.duplicateItem(...t))},(0,o.zw)(t.labelResolve()),3)):(0,s.kq)("",!0)}var r=a(38556),i={name:"DuplicateButton",extends:r["default"],data(){return{forType:{main:!1,other:!0,separate:!1},label:"LBL_DUPLICATE_BUTTON"}},methods:{duplicateItem(){alert('Action "ShowDuplicates" is not ready!')}}},u=a(40089);const l=(0,u.Z)(i,[["render",n]]);var d=l},79830:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(73396),o=a(87139);function n(t,e,a,n,r,i){return t.show()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(["bg-primary",t.displayClass()]),onClick:e[0]||(e[0]=(...t)=>i.open_edit&&i.open_edit(...t))},(0,o.zw)(t.labelResolve()),3)):(0,s.kq)("",!0)}a(57658);var r=a(38556),i={name:"EditButton",extends:r["default"],data(){return{forType:{main:!0,other:!1,separate:!1},label:"LBL_EDIT_BUTTON"}},computed:{params(){let t=this.getData;return t.return_action=t.action,t.action="EditView",t}},methods:{open_edit(){this.$router.push({path:"/",query:this.params})}}},u=a(40089);const l=(0,u.Z)(i,[["render",n]]);var d=l},56662:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(73396),o=a(87139);function n(t,e,a,n,r,i){return t.show()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(t.displayClass()),onClick:e[0]||(e[0]=(...t)=>i.checkDuplicates&&i.checkDuplicates(...t))},(0,o.zw)(t.labelResolve()),3)):(0,s.kq)("",!0)}a(57658);var r=a(38556),i={name:"FindDuplicatesButton",extends:r["default"],data(){return{forType:{main:!1,other:!0,separate:!1},label:"LBL_DUP_MERGE"}},methods:{async checkDuplicates(){let t={module:"MergeRecords"};t.record=this.getData.record,t.return_id=this.getData.record,t.return_action=this.getData.action,t.return_module=this.getData.module,t.action="Step1",t.isDuplicate=!1,this.$router.push({path:"/",query:t})}}},u=a(40089);const l=(0,u.Z)(i,[["render",n]]);var d=l},1109:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(73396),o=a(87139);function n(t,e,a,n,r,i){return(0,s.wg)(),(0,s.iD)("button",{type:"button",class:(0,o.C_)(["",t.displayClass()]),onClick:e[0]||(e[0]=t=>i.deleteHandler())},(0,o.zw)(t.name.innerHTML),3)}a(57658);var r=a(38556),i={name:"MassDeleteButton",extends:r["default"],data(){return{forType:{main:!1,other:!0,separate:!1},label:"LBL_REMOVE"}},computed:{linkParams(){return{get:{VueAjax:1,method:"getMassUpdateForm",action:"ListView",module:this.pageData.module}}},massData(){return this.$store.state.mass_actions},countSelected(){if(this.massData.all)return this.$store.state.focus.data.pageData.offsets.total;let t=0;for(const e in this.massData.uids)this.massData.uids[e]&&t++;return t},uids(){if(this.massData.all)return"";let t=[];for(const e in this.massData.uids)this.massData.uids[e]&&t.push(e);return t.join()},queryByPage(){let t=document.getElementById(this.$store.state.focus.data.searchData.viewTab+"_search_form"),e=new FormData(t);return JSON.stringify(Object.fromEntries(e))}},methods:{deleteHandler(){let t=this.DOAPP.utils.translate("NTC_DELETE_CONFIRMATION_NUM")+" "+this.countSelected+" "+this.DOAPP.utils.translate("NTC_DELETE_SELECTED_RECORDS");this.DOAPP.swal.getConfirmToast({title:"",text:t,onConfirmed:this.massDelete})},async massDelete(){let t=new FormData;t.set("massupdate",!0),t.set("Delete",!0),t.set("module",this.pageData.module),t.set("return_module",this.pageData.module),t.set("return_action","ListView"),t.set("action","MassUpdate"),t.set("uid",this.uids),t.set("current_query_by_page",this.queryByPage),this.uids||t.set("entire","index"),await this.$store.dispatch("focus/postFocus",{data:t,sanitize:!0},{root:!0}),this.$store.commit("mass_actions/RESET_MASS_ACTION")}}},u=a(40089);const l=(0,u.Z)(i,[["render",n]]);var d=l},11781:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(73396),o=a(87139);function n(t,e,a,n,r,i){return(0,s.wg)(),(0,s.iD)("button",{type:"button",class:(0,o.C_)(["",t.displayClass()]),onClick:e[0]||(e[0]=t=>i.getMussUpdateForm())},(0,o.zw)(t.name.innerHTML),3)}var r=a(38556),i={name:"MassUpdateButton",extends:r["default"],data(){return{forType:{main:!1,other:!0,separate:!1},label:"LBL_ACTION_MASSUPDATE"}},computed:{linkParams(){return{get:{VueAjax:1,method:"getMassUpdateForm",action:"ListView",module:this.pageData.module}}}},methods:{async getMussUpdateForm(){this.$store.commit("mass_actions/SET_SIZE","xl"),await this.$store.dispatch("mass_actions/getContentMassUpdate",this.linkParams)}}},u=a(40089);const l=(0,u.Z)(i,[["render",n]]);var d=l},31010:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(73396),o=a(87139);function n(t,e,a,n,r,i){return t.show()?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[i.isGantView()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(["bg-info",t.displayClass()]),onClick:e[0]||(e[0]=(...t)=>i.changeView&&i.changeView(...t))},(0,o.zw)(t.labelResolve()),3)):(0,s.kq)("",!0)],64)):(0,s.kq)("",!0)}a(57658);var r=a(38556),i={name:"ProjectViewDetailButton",extends:r["default"],data(){return{forType:{main:!0,other:!1,separate:!1},label:"LBL_DETAIL_BUTTON_LABEL"}},methods:{isGantView(){return"view_GanttChart"===this.getData.action},changeView(){let t=this.getData;this.getData.action="DetailView",this.$router.push({path:"/",query:t})}}},u=a(40089);const l=(0,u.Z)(i,[["render",n]]);var d=l},56029:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(73396),o=a(87139);function n(t,e,a,n,r,i){return t.show()?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[i.isDetailView()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(["bg-info",t.displayClass()]),onClick:e[0]||(e[0]=(...t)=>i.changeView&&i.changeView(...t))},(0,o.zw)(t.labelResolve()),3)):(0,s.kq)("",!0)],64)):(0,s.kq)("",!0)}a(57658);var r=a(38556),i={name:"ProjectViewGantButton",extends:r["default"],data(){return{forType:{main:!0,other:!1,separate:!1},label:"LBL_GANTT_BUTTON_LABEL"}},methods:{isDetailView(){return"DetailView"===this.getData.action},changeView(){let t=this.getData;this.getData.action="view_GanttChart",this.$router.push({path:"/",query:t})}}},u=a(40089);const l=(0,u.Z)(i,[["render",n]]);var d=l},3858:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=a(73396),o=a(87139);const n=["form"];function r(t,e,a,r,i,u){return t.show()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(["bg-primary",t.displayClass()]),form:t.pageData.view,onClick:e[0]||(e[0]=(...t)=>u.saveFormAndContinue&&u.saveFormAndContinue(...t))},(0,o.zw)(t.labelResolve()),11,n)):(0,s.kq)("",!0)}var i=a(38556),u={name:"SaveAndContinueButton",extends:i["default"],data(){return{forType:{main:!0,other:!1,separate:!1},label:""}},methods:{async saveFormAndContinue(t){let e=new FormData(t.target.form);if(!this.validationForm(e))return void this.DOAPP.swal.getErrorToast(this.DOAPP.utils.translate("LBL_DA_INVALID_FORM").toUpperCase());e.append("action","Save");let a=await this.$store.dispatch("ajaxPost",{data:e,sanitize:!0});a.current_mod===this.pageData.module&&this.DOAPP.swal.getSuccessToast();let s={get:this.getData,sanitize:!0};await this.$store.dispatch("focus/getFocus",s)},validationForm(t){console.log("validateForm");let e=!0;for(let a of t.entries())if("duration_hours"===a[0]){let t=this.$store.getters[this.state+"/getValidation"](a[0]);for(let a in t)t[a].valid||(e=!1)}else!1===this.DOAPP.validate.validateHandler(a[0],a[1],this.beanData[a[0]],this.state)&&(e=!1);return e}}},l=a(40089);const d=(0,l.Z)(u,[["render",r]]);var h=d},89244:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=a(73396),o=a(87139);const n=["form"];function r(t,e,a,r,i,u){return t.show()?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,o.C_)(["",t.displayClass()]),form:t.pageData.view,onClick:e[0]||(e[0]=(...t)=>u.customMethod&&u.customMethod(...t))},(0,o.zw)(t.labelResolve()),11,n)):(0,s.kq)("",!0)}var i=a(88738),u={name:"SaveAndSendButton",extends:i["default"],data(){return{forType:{main:!1,other:!0,separate:!1},label:"LBL_SEND_BUTTON_TITLE"}},methods:{customMethod(t){this.saveForm(t),console.log("TODO: CustomLogic")}}},l=a(40089);const d=(0,l.Z)(u,[["render",r]]);var h=d},73637:function(t,e,a){a.r(e),a.d(e,{default:function(){return r}});var s=a(88738),o={name:"UsersSaveButton",extends:s["default"],data(){return{forType:{main:!0,other:!1,separate:!1},label:"LBL_SAVE_BUTTON_LABEL",confirmAdmin:!1}},methods:{async customMethod(t){let e=new FormData(t.target.form);this.setPassword(e)?this.validationForm(e)?this.adminCheck(e)?(this.saveForm(e),console.log("TODO: CustomLogic")):console.log("!!! adminCheck IS NOT VALID !!!"):console.log("!!! FORM IS NOT VALID !!!"):console.log("!!! PASSWORD IS NOT VALID !!!")},setPassword(t){let e={};for(let a of t.entries())e[a[0]]=a[1];if(""!==e.new_password||""!==e.confirm_new_password||""!==e.old_password){if(!this.$store.state.user.data.is_admin&&""===e.old_password)return this.showWarning(this.DOAPP.utils.translate("ERR_ENTER_OLD_PASSWORD",this.pageData.module)),!1;if(""===e.new_password)return this.showWarning(this.DOAPP.utils.translate("ERR_ENTER_NEW_PASSWORD",this.pageData.module)),!1;if(""===e.confirm_new_password)return this.showWarning(this.DOAPP.utils.translate("ERR_ENTER_CONFIRMATION_PASSWORD",this.pageData.module)),!1;if(e.new_password!==e.confirm_new_password)return this.showWarning(this.DOAPP.utils.translate("ERR_REENTER_PASSWORDS",this.pageData.module)),!1}return!0},showWarning(t,e="sm",a=!1){let s={type:"Info",header:{show:!0,data:{title:"LBL_ERROR",module:this.pageData.module}},body:{show:!0,data:{pageData:{bean:{moduleName:this.pageData.module}},content:{text:t}}},footer:{show:!0,data:{}}};a&&(s.footer.data=a.footer),this.$store.dispatch("popup/getCustomPopup",{size:e,data:s})},adminCheck(t){return!(this.$store.state.user.data.is_focus_admin&&!this.$store.state.user.data.is_admin)||(this.showWarning(this.DOAPP.utils.translate("LBL_CONFIRM_REGULAR_USER",this.pageData.module),"m",{footer:{onConfirm:()=>{this.saveForm(t),this.$store.dispatch("popup/hide")}}}),!1)}}};const n=o;var r=n}}]);