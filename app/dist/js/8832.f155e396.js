"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[8832,397,9112],{50397:function(e,t,s){s.r(t),t["default"]={"#007bff":"Primary","#6c757d":"Secondary","#17a2b8":"Info","#28a745":"Success","#ffc107":"Warning","#dc3545":"Danger","#6610f2":"Indigo","#3c8dbc":"Lightblue","#605ca8":"Purple","#e83e8c":"Pink","#f8f8f8":"Default"}},49112:function(e,t,s){s.r(t);s(57658),s(82801),s(61295);var a=s(50397),r=s(24239);const l={computed:{getColorScheme(){let e={};e=Object.assign({},this.calendarSettings.activityColors);for(let t in e)for(let s in e[t])"label"!==s&&(e[t][s]=this.getColorCodeToInput(e[t][s],t));return e},focusData(){return!0===this.isDashlet?this.$store.state.focus.data.viewData.panelsData[this.dashletId].viewData.data:this.$store.state.focus.data},isDashlet(){return this.$store.getters["app/getCalendarIsDashlet"]},dashletId(){return this.$store.getters["app/getCalendarDashletId"]},calendarSettings(){return this.$store.state.app.setting.calendar.settings},sharedUsers(){return this.$store.state.app.setting.calendar.sharedUsers},sharedUsersNames(){let e={};return this.sharedUsers.length&&this.availableSharedUsers&&this.sharedUsers.forEach((t=>{e[t]=this.availableSharedUsers[t]})),e},isEmptySharedUsers(){return!this.sharedUsers.length},availableSharedUsers(){let e={};return this.focusData&&this.focusData.availableSharedUsers&&(e=this.focusData.availableSharedUsers),e},isOnlyMineFlag(){return this.$store.state.app.setting.calendar.isOnlyMineFlag},savedCalendarPresets(){return this.$store.state.app.setting.saved_calendar_presets},hasSavedPresets(){return!!this.savedCalendarPresets.length},activePreset(){return this.savedCalendarPresets.find((e=>!0===e.isActive))},hasActivePreset(){return!!this.activePreset}},methods:{toggleFilter(){window.$("#collapseCalendarSettings").collapse("hide"),window.$("#collapsePresetActions").collapse("hide"),window.$("#collapseCalendarSelectUsers").collapse("toggle")},toggleSettings(){window.$("#collapseCalendarSelectUsers").collapse("hide"),window.$("#collapsePresetActions").collapse("hide"),window.$("#collapseCalendarSettings").collapse("toggle")},togglePresetActions(){window.$("#collapseCalendarSelectUsers").collapse("hide"),window.$("#collapseCalendarSettings").collapse("hide"),window.$("#collapsePresetActions").collapse("toggle")},async clearAll(e){window.$("#collapseCalendarSelectUsers").collapse("hide"),window.$("#collapsePresetActions").collapse("hide"),window.$("#collapseCalendarSettings").collapse("hide"),r["default"].commit("app/UPDATE_SHARED_USERS",[],{root:!0}),await this.setSharedUsers(),await this.cleanSettings(),await this.acceptSettings(e,!0)},toggleToDarkTheme(e){let t=[];t.push(document.querySelector(".dhx_cal_container")),t.push(document.querySelector(".dhx_cal_navline.dhx_cal_navline_flex")),t.push(document.querySelector(".dhx_cal_header")),t.push(document.querySelector(".dhx_cal_data")),t.push(document.querySelector(".dhx_scale_holder_now"));for(let s of t)s&&(e?s.classList.add("dark"):s.classList.remove("dark"))},async cleanSettings(){this.$store.commit("app/CLEAR_SETTINGS",structuredClone(this.$store.getters["app/getDefaultCalendarSettings"]))},async acceptSharedUsers(e,t){this.$store.commit("app/DEACTIVATE_CALENDAR_PRESETS"),await this.setSharedUsers(t),await this.setCalendarConfiguration(e)},async setCalendarConfiguration(e,t=!1){let s=new FormData(e.target.form),a=new FormData;if(t)a.append("day",r["default"].state.app.setting.calendar.settings.selectedDay),a.append("month",r["default"].state.app.setting.calendar.settings.selectedMonth),a.append("year",r["default"].state.app.setting.calendar.settings.selectedYear),a.append("view",r["default"].getters["app/getCalendarView"]());else for(let n of s.entries())n[1]=this.booleanTransform(n[1]),a.append(n[0],n[1]),"view"===n[0]&&(n[1]=r["default"].getters["app/getCalendarView"](),a.append(n[0],n[1]));let l={get:{module:"Calendar",action:"SaveSettings"},data:t?a:s};await this.$store.dispatch("focus/setCalendarSettings",l)},async acceptSettings(e,t=!1){this.$store.commit("app/DEACTIVATE_CALENDAR_PRESETS"),await this.setCalendarConfiguration(e,t)},setSharedUsers(e=[]){this.$store.dispatch("focus/setSharedUsers",e)},getColorCodeToInput(e,t){let s=e;return e.includes("#")||(s="#"+s),s=s.toLowerCase(),Object.hasOwn(a["default"],s)||(s=r["default"].getters["app/getDefaultCalendarSettings"].activityColors[t].body),s},setColorScheme(e,t,s){let a=Object.assign({},this.getColorScheme);a[t][s]=e},setColors(){let e=this.calendarSettings.activityColors;for(let t in e){let s=".dhx_cal_event.event_"+t+" div, .dhx_cal_event_line.event_"+t,a=s+", .dhx_cal_event.dhx_cal_editor.event_"+t,r=".dhx_cal_event_clear.event_"+t,l=this.getSSClass(s.split(",")),n=this.getSSClass(a.split(",")),i=this.getSSClass(r.split(","));if(!(l&&n&&i))break;l.borderColor=e[t].border,n.backgroundColor=e[t].body,n.color=e[t].text,i.color=e[t].body}return!0},getSSClass(e){let t=!1;for(let s in document.styleSheets)for(let a in document.styleSheets[s].cssRules)if(document.styleSheets[s].cssRules[a].selectorText)for(let r of e){if(!document.styleSheets[s].cssRules[a].selectorText.includes(r))break;t=document.styleSheets[s].cssRules[a].style}return t},booleanTransform(e){return"on"===e||e}}};t["default"]=l},78832:function(e,t,s){s.r(t),s.d(t,{default:function(){return A}});var a=s(73396),r=s(87139),l=s(49242);const n={class:"row"},i={class:"form-group col-lg-6"},o={for:"saved_search_name"},d={class:"input-group"},c={class:"input-group-append"},p={class:"form-group col-lg-6"},h={for:"curr_search_name"},u={class:"input-group"},g={id:"curr_search_name",class:"form-control"},S={class:"input-group-append"},_=["disabled"],f=["disabled"];function m(e,t,s,m,C,w){return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",i,[(0,a._)("label",o,(0,r.zw)(e.DOAPP.utils.translate("LBL_SAVE_SEARCH_AS","SavedSearch")),1),(0,a._)("div",d,[(0,a.wy)((0,a._)("input",{type:"text",id:"preset_name",name:"preset_name",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>C.presetName=e)},null,512),[[l.nr,C.presetName]]),(0,a._)("div",c,[(0,a._)("button",{type:"button",class:"btn btn-primary",form:"calendarSettings",onClick:t[1]||(t[1]=(...e)=>w.savePreset&&w.savePreset(...e))},(0,r.zw)(e.DOAPP.utils.translate("LBL_SAVE_BUTTON_LABEL")),1)])])]),(0,a._)("div",p,[(0,a._)("label",h,(0,r.zw)(e.DOAPP.utils.translate("LBL_MODIFY_CURRENT_FILTER","SavedSearch")),1),(0,a._)("div",u,[(0,a._)("div",g,(0,r.zw)(e.hasActivePreset?e.activePreset.name:""),1),(0,a._)("div",S,[(0,a._)("button",{type:"button",class:"btn btn-primary",form:"calendarSettings",onClick:t[2]||(t[2]=(...e)=>w.updatePreset&&w.updatePreset(...e)),disabled:!e.hasActivePreset},(0,r.zw)(e.DOAPP.utils.translate("LBL_UPDATE")),9,_),(0,a._)("button",{type:"button",class:"btn btn-danger",form:"calendarSettings",onClick:t[3]||(t[3]=(...e)=>w.deletePreset&&w.deletePreset(...e)),disabled:!e.hasActivePreset},(0,r.zw)(e.DOAPP.utils.translate("LBL_DELETE_BUTTON")),9,f)])])])])}var C=s(49112),w={name:"CalendarPresetActions",data(){return{presetName:""}},mixins:[C["default"]],methods:{async savePreset(e){await this.setCalendarConfiguration(e,!1),await this.$store.commit("app/DEACTIVATE_CALENDAR_PRESETS"),await this.$store.dispatch("app/saveCalendarPreset",this.presetName),await this.$store.dispatch("app/setSettings",this.$store.state.app.setting),this.presetName=""},async updatePreset(e){await this.setCalendarConfiguration(e),this.$store.commit("app/UPDATE_CALENDAR_PRESET"),await this.$store.dispatch("app/setSettings",this.$store.state.app.setting)},async deletePreset(e){this.activePreset&&(this.$store.commit("app/REMOVE_CALENDAR_PRESET"),this.$store.commit("app/CHOOSE_CALENDAR_PRESET"),await this.setCalendarConfiguration(e,!0),await this.$store.dispatch("app/setSettings",this.$store.state.app.setting))}}},v=s(40089);const P=(0,v.Z)(w,[["render",m]]);var A=P}}]);