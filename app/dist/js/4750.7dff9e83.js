"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[4750,7290,6385,7222],{34750:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var a=i(73396),l=i(87139);const s=e=>((0,a.dD)("data-v-5cdae16d"),e=e(),(0,a.Cn)(),e),n=s((()=>(0,a._)("i",{class:"mr-1 suitepicon suitepicon-module-history text-sm"},null,-1))),o={key:0,class:"timeline mb-0 py-2"},d={class:"timeline-item"},r={class:"d-flex justify-content-between flex-wrap py-1"},c={class:"timeline-header"},u={class:"time"},m=s((()=>(0,a._)("i",{class:"fas fa-clock"},null,-1))),p={class:"timeline-body border-top"},h={key:0},w={key:1},y={key:2},_={class:"timeline-footer d-flex justify-content-end"},g=["onClick"],b={key:1,class:"container"},D={class:"text-center py-4 text-muted"};function f(e,t,i,s,f,k){const S=(0,a.up)("TabPreloader"),T=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("h5",null,[n,(0,a.Uk)(" "+(0,l.zw)(e.DOAPP.utils.translate("LBL_ACCUMULATED_HISTORY_BUTTON_LABEL")),1)]),(0,a._)("div",{class:"overflow-auto mb-3 border rounded timeline-wrapper thin-scroll",style:(0,l.j5)(k.timelineStyle)},[(0,a.Wm)(S,{isShow:f.preloaderShow},null,8,["isShow"]),f.timelineData?((0,a.wg)(),(0,a.iD)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.timelineData.summary_list,((t,i)=>((0,a.wg)(),(0,a.iD)("div",{key:i},[(0,a._)("i",{class:(0,l.C_)(["far suitepicon",k.iconClass(t.module)])},null,2),(0,a._)("div",d,[(0,a._)("div",r,[(0,a._)("h3",c,[(0,a.Uk)((0,l.zw)(t.direction)+" "+(0,l.zw)(t.type)+" ",1),(0,a._)("b",null,(0,l.zw)(t.contact_name),1),(0,a._)("b",null,(0,l.zw)(t.status),1)]),(0,a._)("span",u,[m,(0,a.Uk)(" "+(0,l.zw)(t.date_type)+" "+(0,l.zw)(t.date_modified),1)])]),(0,a._)("div",p,[t.acl.detail?((0,a.wg)(),(0,a.iD)("h5",h,[(0,a.Wm)(T,{to:{query:{module:t.module,action:"DetailView",record:t.id}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t.name)+" "+(0,l.zw)(t.attachment),1)])),_:2},1032,["to"])])):((0,a.wg)(),(0,a.iD)("h5",w,(0,l.zw)(t.name)+" "+(0,l.zw)(t.attachment),1)),t.acl.detail?((0,a.wg)(),(0,a.iD)("span",y,(0,l.zw)(t.description),1)):(0,a.kq)("",!0)]),(0,a._)("div",_,[t.acl.edit?((0,a.wg)(),(0,a.j4)(T,{key:0,class:"btn btn-info btn-sm ml-1",to:{query:{module:t.module,action:"EditView",record:t.id,return_module:this.module,return_action:"DetailView",return_id:this.record}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.DOAPP.utils.translate("LBL_EDIT_BUTTON")),1)])),_:2},1032,["to"])):(0,a.kq)("",!0),t.acl.delete?((0,a.wg)(),(0,a.iD)("a",{key:1,class:"btn btn-danger btn-sm ml-1",onClick:e=>k.deleteRelationship(t)},(0,l.zw)(e.DOAPP.utils.translate("LBL_DELETE_BUTTON")),9,g)):(0,a.kq)("",!0)])])])))),128))])):(0,a.kq)("",!0),f.emptyShow?((0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("p",D,(0,l.zw)(e.DOAPP.utils.translate("MSG_LIST_VIEW_NO_RESULTS_BASIC")),1)])):(0,a.kq)("",!0)],4)],64)}var k=i(96385),S={name:"TimeLine",components:{TabPreloader:k["default"]},props:{sectorHeight:Number,module:String,record:String},data(){return{timelineData:!1,preloaderShow:!0,emptyShow:!1}},mounted(){this.getData()},computed:{timelineStyle(){return this.timelineData?{"max-height":this.sectorHeight+"px"}:{}}},methods:{async deleteRelationship(e){let t=new FormData;t.append("module",this.module),t.append("action","DeleteRelationship"),t.append("record",this.record),t.append("linked_field",e.module.toLowerCase()),t.append("linked_id",e.id),t.append("refresh_page",1),await this.$store.dispatch("ajaxPost",{data:t,sanitize:!1}),this.$store.commit("app/SET_CONTENT_READY",!1),this.$store.commit("app/SET_CONTENT_READY",!0)},async getData(){let e=await this.$store.dispatch("ajaxGet",{get:{VueAjax:1,method:"getTimeline",arg:{module_name:this.module,record:this.record}},sanitize:!1});this.DOAPP.utils.isEmpty(e.data.summary_list)?this.emptyShow=!0:this.timelineData=e.data,this.preloaderShow=!1,console.log(this.emptyShow),console.log(this.timelineData)},iconClass(e){let t,i="suitepicon-module-"+e.replaceAll("_","-").toLowerCase();return t="Emails"===e?"bg-blue":"Meetings"===e?"bg-yellow":"Calls"===e?"bg-green":"Tasks"===e?"bg-indigo":"Notes"===e?"bg-cyan":"bg-gray",i+" "+t}}},T=i(40089);const C=(0,T.Z)(S,[["render",f],["__scopeId","data-v-5cdae16d"]]);var v=C},96385:function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var a=i(73396),l=i(87139);const s=e=>((0,a.dD)("data-v-4bd0c545"),e=e(),(0,a.Cn)(),e),n=s((()=>(0,a._)("i",{class:"fas fa-3x fa-sync-alt fa-spin"},null,-1))),o=[n];function d(e,t,i,s,n,d){return i.isShow?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"tab-preloader flex-column justify-content-center align-items-center",style:(0,l.j5)(n.styleObj)},o,4)):(0,a.kq)("",!0)}var r={name:"TabPreloader2",props:{isShow:{type:Boolean}},data(){return{styleObj:{height:"10px",width:"10px",opacity:0}}},updated(){this.updateStyle()},mounted(){this.updateStyle()},methods:{updateStyle(){let e=this.$el.parentElement,t=window.getComputedStyle(e).backgroundColor,i=e.getBoundingClientRect();i.height<80&&(e.style.minHeight="80px"),this.styleObj.backgroundColor=t,this.styleObj.height=i.height-2+"px",this.styleObj.width=i.width-2+"px",this.isShow?this.styleObj.opacity=1:this.styleObj.opacity=0}}},c=i(40089);const u=(0,c.Z)(r,[["render",d],["__scopeId","data-v-4bd0c545"]]);var m=u}}]);