"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[5840],{95840:function(t,e,r){r.r(e);const n={data(){return{config:{primeContainer:{selector:"data-dr-prime-container",current:""},container:{selector:"data-dr-container",current:""},item:{selector:"data-dr-item",current:""},handle:{selector:"data-dr-handle",current:""},active:{selector:"data-dr-item-active",current:""},target:{selector:"",current:""},back:{selector:"data-dr-back",current:""},isInsertBefore:!1},needToInsert:!0}},mounted(){this.initDragAndDrop()},updated(){this.initDragAndDrop()},methods:{initDragAndDrop(){const t=document.querySelectorAll("["+this.config.container.selector+"]");t.forEach((t=>{t.addEventListener("dragenter",this.onContainerDragEnter),t.querySelectorAll("["+this.config.item.selector+"]").forEach((t=>{t.hasAttribute(this.config.item.selector)&&(t.addEventListener("mousedown",this.setDraggable),t.addEventListener("dragstart",this.onDragStart),t.addEventListener("dragend",this.onDragEnd),t.addEventListener("dragleave",this.onDragLeave),t.addEventListener("dragover",this.onDragOver),this.addBackElement(t))}))}))},addBackElement(t){if(t.querySelector("["+this.config.back.selector+"]"))return;t.style.position="relative";let e=document.createElement("div");e.style.height="100%",e.style.width="100%",e.style.top=0,e.style.left=0,e.style.position="absolute",e.style.zIndex=-1,e.setAttribute(this.config.back.selector,""),t.appendChild(e)},onContainerDragEnter(t){if(t.stopPropagation(),!this.config.active.current)return;let e=this.config.container;if(e.current!==t.currentTarget&&e.current.getAttribute(e.selector)===t.currentTarget.getAttribute(e.selector))try{this.config.container.current=t.currentTarget}catch(r){return r}},onDragLeave(t){const e=document.elementsFromPoint(t.clientX,t.clientY);if(-1===e.findIndex((t=>this.config.target.current===t)))try{this.config.target.current.firstElementChild.style.boxShadow="",this.config.target.current.firstElementChild.style.marginBottom="1rem",this.config.target.current.firstElementChild.style.top=0}catch{return 0}},setDraggable(t){t.stopPropagation(),t.target.hasAttribute(this.config.handle.selector)&&(this.addBackElement(t.currentTarget),this.config.handle.current=t.target,this.config.active.current=t.currentTarget,this.config.container.current=this.config.active.current.parentNode,this.config.active.current.setAttribute("draggable",!0))},onDragStart(t){t.stopPropagation();try{this.config.active.current.setAttribute(this.config.active.selector,!0),this.config.active.current.classList.remove("wink"),this.config.primeContainer.current=this.config.active.current.parentNode}catch(e){return e}},onDragEnd(t){if(t.stopPropagation(),!this.config.active.current)return;const e=document.elementFromPoint(t.clientX,t.clientY),r=e.hasAttribute("data-dr-container"),n=e.getAttribute("data-dr-container"),i=this.config.active.current.parentNode,c=i.getAttribute("data-dr-container");let o;this.needToInsert&&(r&&n===c?(o=e.lastChild,e.appendChild(this.config.active.current)):this.config.container.current&&this.config.target.current&&(o=this.config.isInsertBefore?this.config.target.current:this.config.target.current.nextElementSibling,this.config.container.current.insertBefore(this.config.active.current,o))),this.customEndHandler(),this.config.target.current&&(this.config.target.current.firstElementChild.style.boxShadow="",this.config.target.current.firstElementChild.style.marginBottom="1rem",this.config.target.current.firstElementChild.style.top=0),this.config.active.current&&(this.config.active.current.removeAttribute(this.config.active.selector),this.config.active.current.classList.add("wink"),this.config.active.current.setAttribute("draggable",!1),this.config.active.current="")},onDragOver(t){t.stopPropagation(),t.preventDefault();const e=t.currentTarget;let r=e.parentNode,n=this.config.container.current;const i=r.getAttribute("data-dr-container"),c=this.config.container.current?this.config.container.current.getAttribute("data-dr-container"):"";if(i&&c){if(i!==c)return;this.config.container.current=r}else if(r!==n)return;const o=this.config.active.element!==e&&e.hasAttribute(this.config.item.selector);o&&(this.getInsertBefore(t),this.config.target.current=e,this.config.isInsertBefore&&this.config.target.current?(this.config.target.current.firstElementChild.style.boxShadow=" 0 -10px 5px rgba(0, 0, 0, 0.25)",this.config.target.current.firstElementChild.style.top="34px",this.config.target.current.firstElementChild.style.marginBottom="1rem",this.config.target.current.firstElementChild.style.transition="all 0.15s ease-in-out"):this.config.target.current&&(this.config.target.current.firstElementChild.style.boxShadow=" 0 10px 5px rgba(0, 0, 0, 0.25)",this.config.target.current.firstElementChild.style.top="0",this.config.target.current.firstElementChild.style.marginBottom="50px",this.config.target.current.firstElementChild.style.transition="all 0.15s ease-in-out"))},getInsertBefore(t){const e=t.currentTarget.querySelector("["+this.config.back.selector+"]");let r;e&&(r=e.getBoundingClientRect(),t.clientX>=r.x&&t.clientX<=r.right&&t.clientY>r.y&&t.clientY<=r.bottom&&(this.config.isInsertBefore=t.clientY-r.y<r.height/2))},customEndHandler(){console.log("Drag&Drop done - custom logic")}},beforeUnmount(){document.removeEventListener("mousedown",this.setDraggable),document.removeEventListener("dragstart",this.onDragStart),document.removeEventListener("dragend",this.onDragEnd),document.removeEventListener("dragover",this.onDragOver)}};e["default"]=n}}]);