"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[7115,3312],{93312:function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});a(82801),a(61295),a(57658);var s={name:"AbstractActivities",beforeMount(){this.extendDefaultReminder()},computed:{user(){return this.$store.state.user.data},scheduler(){return this.$store.state.focus.data.pageData.reminderInvite&&this.$store.state.focus.data.pageData.reminderInvite.users_arr?this.$store.state.focus.data.pageData.reminderInvite.users_arr:[]},reminders(){return this.$store.state.focus.data.beanData.reminders.value},remindersData(){if(this.reminders.remindersData){let e=structuredClone(this.reminders.remindersData);for(let t of e)"1"===t.popup?t.popup=!0:t.popup=!1,"1"===t.email?t.email=!0:t.email=!1;return JSON.stringify(e)}return[]},reminderInvite(){let e={},t="";this.scheduler.forEach((a=>{t=a.module?"Users"===a.module||"Leads"===a.module||"Contacts"===a.module?a.module:a.module+"s":a.moduleName,e[t]||(e[t]=[]),e[t].push(a.fields.id)}));for(let a in e)e[a]=e[a].join();return e}},methods:{extendDefaultReminder(){let e=Object.assign({},this.reminders);e.remindersDefaultValuesData["invitees"]=[{id:"",module:"Users",module_id:this.user.id,value:this.user.firstName+" "+this.user.lastName}],this.$store.dispatch("focus/updateModelValue",{name:"reminders",value:e})},addPopup(e,t){this.$store.dispatch("popup/setSize",t),this.$store.dispatch("popup/fill",e),this.$store.dispatch("popup/show")}}};const r=s;var i=r},27115:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var s=a(73396),r=a(49242),i=a(87139);const l=e=>((0,s.dD)("data-v-15120efc"),e=e(),(0,s.Cn)(),e),d={class:"card-header"},n={class:"card-title"},o=l((()=>(0,s._)("div",{class:"card-tools"},[(0,s._)("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse",title:"Collapse"},[(0,s._)("i",{class:"fas fa-minus"})])],-1))),u={class:"card-body"},m={id:"reminders"},c={class:"row"},p=["data-reminder-id"],_=l((()=>(0,s._)("span",{class:"error-msg"},null,-1))),f={class:"col"},h={class:"truncate-label"},b={class:"col mb-2"},v={class:"form-check mb-2"},D=["id","onUpdate:modelValue"],w=["for"],g=["onUpdate:modelValue"],k=["label","value"],y={class:"col mb-4"},R={class:"form-check mb-2"},L=["id","onUpdate:modelValue"],P=["for"],E=["onUpdate:modelValue"],I=["label","value"],M=["onClick"];function O(e,t,a,l,O,U){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.wy)((0,s._)("input",{type:"hidden",name:"reminders_data",id:"reminders_data","onUpdate:modelValue":t[0]||(t[0]=t=>e.remindersData=t)},null,512),[[r.nr,e.remindersData]]),(0,s.Wm)(r.W3,{name:"reminder",tag:"div",class:"col-lg-4 da-reminder-container"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O.remindersList,((t,l)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"card card-info card-outline expanded"},[(0,s._)("div",d,[(0,s._)("h3",n,(0,i.zw)(e.DOAPP.utils.translate(a.beanData.reminders.vname,a.module)),1),o]),(0,s._)("div",u,[(0,s._)("div",m,[(0,s._)("div",c,[(0,s._)("div",{class:"form-group col-lg-12 mb-4","data-reminder-id":l},[_,(0,s._)("div",f,[(0,s._)("label",h,(0,i.zw)(e.DOAPP.utils.translate("LBL_REMINDERS_ACTIONS",a.module)),1)]),(0,s._)("div",b,[(0,s._)("div",v,[(0,s.wy)((0,s._)("input",{type:"checkbox",class:"form-check-input",id:"reminder_popup"+l,"true-value":"1","false-value":"0","onUpdate:modelValue":e=>t.popup=e},null,8,D),[[r.e8,t.popup]]),(0,s._)("label",{class:"form-check-label",for:"reminder_popup"+l},(0,i.zw)(e.DOAPP.utils.translate("LBL_REMINDERS_POPUP",a.module)),9,w)]),(0,s.wy)((0,s._)("select",{class:"custom-select",tabindex:"0","onUpdate:modelValue":e=>t.timer_popup=e},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.reminders.reminder_time_options,((e,t)=>((0,s.wg)(),(0,s.iD)("option",{key:t,label:e,value:t},(0,i.zw)(e),9,k)))),128))],8,g),[[r.bM,t.timer_popup]])]),(0,s._)("div",y,[(0,s._)("div",R,[(0,s.wy)((0,s._)("input",{type:"checkbox",class:"form-check-input",id:"reminder_email"+l,"true-value":"1","false-value":"0","onUpdate:modelValue":e=>t.email=e},null,8,L),[[r.e8,t.email]]),(0,s._)("label",{class:"form-check-label",for:"reminder_email"+l},(0,i.zw)(e.DOAPP.utils.translate("LBL_REMINDERS_EMAIL",a.module)),9,P)]),(0,s.wy)((0,s._)("select",{class:"custom-select",tabindex:"0","onUpdate:modelValue":e=>t.timer_email=e},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.reminders.reminder_time_options,((e,t)=>((0,s.wg)(),(0,s.iD)("option",{key:t,label:e,value:t},(0,i.zw)(e),9,I)))),128))],8,E),[[r.bM,t.timer_email]])]),(0,s._)("button",{type:"button",class:"btn btn-danger ml-2 mt-2",onClick:e=>U.deleteReminder(t)},(0,i.zw)(e.DOAPP.utils.translate("LBL_REMINDERS_REMOVE_REMINDER",a.module)),9,M)],8,p)])])])])))),128))])),_:1})],64)}var U=a(93312),V={name:"RemindersPanel",extends:U["default"],beforeMount(){this.remindersList=this.reminders.remindersData},props:{beanData:{type:Object,required:!0},module:{type:String,required:!0}},data(){return{remindersList:[]}},methods:{deleteReminder(e){let t=this.remindersList.indexOf(e);t>-1&&this.remindersList.splice(t,1)}}},N=a(40089);const x=(0,N.Z)(V,[["render",O],["__scopeId","data-v-15120efc"]]);var A=x}}]);