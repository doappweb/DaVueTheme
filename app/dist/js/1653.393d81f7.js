"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[1653,4928,1486],{31486:function(e,i,t){t.r(i),t.d(i,{default:function(){return h}});var n=t(73396),l=t(87139);const a=["data-type","data-field"],s={class:"text-muted font-weight-bold"},d={key:0,class:"d-block"},r={key:1,class:"d-block"};function o(e,i,t,o,u,c){return(0,n.wg)(),(0,n.iD)("div",{class:(0,l.C_)(["mb-3",c.widthClass]),"data-type":c.fieldDef.type,"data-field":t.name},[(0,n._)("span",s,[(0,n.Uk)((0,l.zw)(e.DOAPP.utils.translate(c.resolveFieldLBL(t.metadata.field.label),t.module))+" ",1),c.inlineEditSet()&&!u.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:0,class:"bi bi-pencil-square ml-2",onClick:i[0]||(i[0]=(...e)=>c.inlineEditInitBtn&&c.inlineEditInitBtn(...e)),role:"button"})):(0,n.kq)("",!0),u.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:1,class:"bi bi-check-circle-fill text-success ml-2",onClick:i[1]||(i[1]=(...e)=>c.inlineEditSaveBtn&&c.inlineEditSaveBtn(...e)),role:"button"})):(0,n.kq)("",!0),u.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:2,class:"bi bi-x-circle-fill text-danger ml-2",onClick:i[2]||(i[2]=(...e)=>c.inlineEditCancelBtn&&c.inlineEditCancelBtn(...e)),role:"button"})):(0,n.kq)("",!0)]),u.inlineEdit.run?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",d,(0,l.zw)(c.value),1)),u.inlineEdit.run||c.value?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",r,"—")),u.inlineEdit.run?((0,n.wg)(),(0,n.j4)((0,n.LL)(c.inlineEditSet()),{key:2,ref:"inlineEdit",name:t.name,module:t.module,record:t.record,metadata:t.metadata,beanData:t.beanData},null,8,["name","module","record","metadata","beanData"])):(0,n.kq)("",!0)],10,a)}var u=t(85697),c={name:"FieldName",widgetCols:1,props:{name:{type:String},module:{type:String},record:{type:String},metadata:{type:Object},beanData:{type:Object},sideBlock:{type:Boolean},accessEdit:{type:Boolean}},data(){return{inlineEdit:{tpl:!1,run:!1,temp:{}}}},computed:{fieldDef(){return this.beanData[this.name]},displayParams(){let e={};return Object.hasOwn(this.metadata.field,"displayParams")&&(e=this.metadata.field.displayParams),e},widthClass(){let e=this.$options.widgetCols;this.sideBlock&&(e=2*this.$options.widgetCols);let i=6*e,t=3*e;return i>=12&&(i=12),t>=12&&(t=12),"col-md-"+i+" col-lg-"+t},value(){return this.DOAPP.utils.htmlDecode(this.fieldDef.value)}},methods:{inlineEditSet(){return!(!this.accessEdit||!1===this.fieldDef.inline_edit)&&u["default"][this.inlineEdit.tpl]},inlineEditInitBtn(){this.inlineEdit.run=!0;let e=setInterval((()=>{this.$refs.inlineEdit&&(clearInterval(e),this.inlineEdit.temp=this.$refs.inlineEdit.localStorage.temp)}),50);setTimeout((()=>{clearInterval(e)}),1e3)},inlineEditCancelBtn(){let e=this.inlineEdit.temp;for(let i in e)this.$store.dispatch("focus/updateModelValue",{name:i,value:e[i]});this.inlineEdit.run=!1,this.inlineEdit.temp={}},inlineEditSaveBtn(){if(this.$refs.inlineEdit.validation.error)return void console.log("validation error");let e=this.$refs.inlineEdit.inlineEditForm(),i={module:"Home",action:"saveHTMLField",current_module:this.module,id:this.record,view:"DetailView",to_pdf:!0};for(let t of e.entries())i["field"]=t[0],i["value"]=t[1],t[1]!==this.inlineEdit.temp[t[0]]&&this.$store.dispatch("ajaxGet",{get:i});this.inlineEdit.run=!1,this.inlineEdit.temp={}},resolveFieldLBL(e){return void 0===e&&(e=this.fieldDef.vname),e}}},m=t(40089);const p=(0,m.Z)(c,[["render",o]]);var h=p},51653:function(e,i,t){t.r(i),t.d(i,{default:function(){return D}});var n=t(73396),l=t(87139);const a=["data-type","data-field"],s={class:"text-muted font-weight-bold bloc"},d={key:0,class:"d-block"},r={key:1,class:"txt-line-through"},o={class:"font-italic"},u={key:1,class:"d-block"},c=["onClick"],m={key:1,class:"txt-line-through"},p={class:"font-italic"},h={key:0,class:"d-block"};function E(e,i,t,E,k,f){return(0,n.wg)(),(0,n.iD)("div",{class:(0,l.C_)(["mb-3",e.widthClass]),"data-type":e.fieldDef.type,"data-field":e.name},[(0,n._)("span",s,[(0,n.Uk)((0,l.zw)(e.DOAPP.utils.translate(e.resolveFieldLBL(e.metadata.field.label),e.module))+" ",1),e.inlineEditSet()&&!k.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:0,class:"bi bi-pencil-square ml-2",onClick:i[0]||(i[0]=(...i)=>e.inlineEditInitBtn&&e.inlineEditInitBtn(...i)),role:"button"})):(0,n.kq)("",!0),k.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:1,class:"bi bi-check-circle-fill text-success ml-2",onClick:i[1]||(i[1]=(...i)=>e.inlineEditSaveBtn&&e.inlineEditSaveBtn(...i)),role:"button"})):(0,n.kq)("",!0),k.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:2,class:"bi bi-x-circle-fill text-danger ml-2",onClick:i[2]||(i[2]=(...i)=>e.inlineEditCancelBtn&&e.inlineEditCancelBtn(...i)),role:"button"})):(0,n.kq)("",!0)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.value,((e,t)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:t},[!k.inlineEdit.run&&f.isPrimary(e)?((0,n.wg)(),(0,n.iD)("span",d,[f.isLink(e)?((0,n.wg)(),(0,n.iD)("a",{key:0,href:"#",onClick:i[3]||(i[3]=e=>f.showComposeView())},(0,l.zw)(e.email_address),1)):((0,n.wg)(),(0,n.iD)("span",r,(0,l.zw)(e.email_address),1)),(0,n._)("span",o,(0,l.zw)(f.getExtraTitle(e)),1)])):(0,n.kq)("",!0),k.inlineEdit.run||f.isPrimary(e)?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",u,[f.isLink(e)?((0,n.wg)(),(0,n.iD)("a",{key:0,href:"#",onClick:i=>f.showComposeView(e.email_address)},(0,l.zw)(e.email_address),9,c)):((0,n.wg)(),(0,n.iD)("span",m,(0,l.zw)(e.email_address),1)),(0,n._)("span",p,(0,l.zw)(f.getExtraTitle(e)),1)]))],64)))),128)),!k.inlineEdit.run&&e.DOAPP.utils.isEmpty(e.value)?((0,n.wg)(),(0,n.iD)("span",h,"—")):(0,n.kq)("",!0),k.inlineEdit.run?((0,n.wg)(),(0,n.j4)((0,n.LL)(e.inlineEditSet()),{key:1,ref:"inlineEdit",name:e.name,module:e.module,record:e.record,metadata:e.metadata,beanData:e.beanData},null,8,["name","module","record","metadata","beanData"])):(0,n.kq)("",!0)],10,a)}var k=t(31486),f={name:"EmailAddressWidgetField",widgetCols:4,extends:k["default"],data(){return{inlineEdit:{tpl:"emailAddressWidget",run:!1,temp:{}}}},methods:{isPrimary(e){return!(!Object.hasOwn(e,"primary_address")||"1"!==e.primary_address)},emailHandler(){alert("Email")},isLink(e){return"1"!==e.opt_out},getExtraTitle(e){let i="";return"1"===e.opt_out&&"1"===e.invalid_email?i=" ("+this.DOAPP.utils.translate("LBL_EMAIL_OPT_OUT_AND_INVALID",this.module)+")":"1"===e.opt_out?i=" ("+this.DOAPP.utils.translate("LBL_OPT_OUT","EmailAddresses")+")":"1"===e.invalid_email?i=" ("+this.DOAPP.utils.translate("LBL_EMAIL_INVALID",this.module)+")":"1"===e.primary_address&&(i=" ("+this.DOAPP.utils.translate("LBL_EMAIL_PRIMARY",this.module)+")"),i},showComposeView(e=!1){let i={get:{VueAjax:1,method:"getSendEmailForm",arg:{targetModule:this.module,ids:this.beanData.id.value}}};e&&(i["refillFields"]={to_addrs_names:this.$store.state.focus.data.pageData.recordName+" <"+e+">"}),this.$store.dispatch("popup/getComposeView",i)}}},w=t(40089);const g=(0,w.Z)(f,[["render",E]]);var D=g}}]);