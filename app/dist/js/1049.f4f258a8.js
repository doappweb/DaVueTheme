"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[1049,2318],{72318:function(t,a,e){e.r(a),e.d(a,{default:function(){return V}});var s=e(73396),i=e(87139);const l=["id"],o=["id"],n={"data-dr-handle":"",class:"card-title"},d={class:"card-tools"},r=["title","aria-label"],p=(0,s._)("i",{class:"fas fa-cogs"},null,-1),h=[p],c=["title","aria-label"],u=(0,s._)("i",{class:"fas fa-sync-alt"},null,-1),D=[u],g=["title","aria-label"],_=(0,s._)("i",{class:"fas fa-times"},null,-1),f=[_],m={class:"card-body p-0"},b={class:"table-responsive"},v={class:"card-footer"},P={key:0,class:"pagination pagination-sm m-0 float-right"},L=["title"],w=(0,s._)("a",{class:"page-link",href:"javascript:void(0)"},[(0,s._)("i",{class:"fas fa-angle-double-left"})],-1),E=[w],H=["title"],k=(0,s._)("a",{class:"page-link",href:"javascript:void(0)"},[(0,s._)("i",{class:"fas fa-angle-left"})],-1),O=[k],y={class:"page-item disabled"},A={class:"page-link",href:"javascript:void(0)"},C=["title"],T=(0,s._)("a",{class:"page-link",href:"javascript:void(0)"},[(0,s._)("i",{class:"fas fa-angle-right"})],-1),B=[T],S=["title"],N=(0,s._)("a",{class:"page-link",href:"javascript:void(0)"},[(0,s._)("i",{class:"fas fa-angle-double-right"})],-1),I=[N];function R(t,a,e,p,u,_){const w=(0,s.up)("daTable");return(0,s.wg)(),(0,s.iD)("div",{id:e.data.id,class:"card"},[(0,s._)("div",{"data-dr-handle":"",class:"card-header",id:"dashlet_header_"+e.data.id},[(0,s._)("h3",n,[(0,s._)("i",{"data-dr-handle":"",class:(0,i.C_)(["mr-1 suitepicon",_.moduleIcon()])},null,2),(0,s.Uk)(" "+(0,i.zw)(e.data.label),1)]),(0,s._)("div",d,[e.lockHomepage?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-tool",title:t.DOAPP.utils.translate("LBL_DASHLET_EDIT","Home"),"aria-label":t.DOAPP.utils.translate("LBL_DASHLET_EDIT","Home"),onClick:a[0]||(a[0]=(...t)=>_.configDashlets&&_.configDashlets(...t))},h,8,r)),(0,s._)("button",{type:"button",class:"btn btn-tool",title:t.DOAPP.utils.translate("LBL_DASHLET_REFRESH","Home"),"aria-label":t.DOAPP.utils.translate("LBL_DASHLET_REFRESH","Home"),onClick:a[1]||(a[1]=(...t)=>_.retrieveDashlet&&_.retrieveDashlet(...t))},D,8,c),e.lockHomepage?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"btn btn-tool",title:t.DOAPP.utils.translate("LBL_DASHLET_DELETE","Home"),"aria-label":t.DOAPP.utils.translate("LBL_DASHLET_DELETE","Home"),onClick:a[2]||(a[2]=(...t)=>_.deleteDashlet&&_.deleteDashlet(...t))},f,8,g))])],8,o),(0,s._)("div",m,[(0,s._)("div",b,[_.pageData?((0,s.wg)(),(0,s.j4)(w,{key:Date.now(),onSortHandler:_.sortHandler,tableId:e.data.id,name:_.pageData.bean.moduleDir+"_"+e.data.id,module:_.pageData.bean.moduleDir,viewData:_.viewData,pageData:_.pageData,viewOptions:{view:"dashlet",activePage:this.activePage,addInfo:!1,dashletId:e.data.id,editViewLinksEnable:e.data.editViewLinksEnable}},null,8,["onSortHandler","tableId","name","module","viewData","pageData","viewOptions"])):(0,s.kq)("",!0)])]),(0,s._)("div",v,[_.dataNotEmpty()?((0,s.wg)(),(0,s.iD)("ul",P,[_.paginationBtn.start?((0,s.wg)(),(0,s.iD)("li",{key:0,class:"page-item",name:"listViewStartButton",title:t.DOAPP.utils.translate("LNK_LIST_START"),onClick:a[3]||(a[3]=t=>_.paginationHandler(_.paginationBtn.start))},E,8,L)):(0,s.kq)("",!0),_.paginationBtn.previous?((0,s.wg)(),(0,s.iD)("li",{key:1,class:"page-item",id:"listViewPrevButton_top",name:"listViewPrevButton",title:t.DOAPP.utils.translate("LNK_LIST_PREVIOUS"),onClick:a[4]||(a[4]=t=>_.paginationHandler(_.paginationBtn.previous))},O,8,H)):(0,s.kq)("",!0),(0,s._)("li",y,[(0,s._)("a",A,(0,i.zw)(_.paginationInfo()),1)]),_.paginationBtn.next?((0,s.wg)(),(0,s.iD)("li",{key:2,class:"page-item",id:"listViewNextButton_top",name:"listViewNextButton",title:t.DOAPP.utils.translate("LNK_LIST_NEXT"),onClick:a[5]||(a[5]=t=>_.paginationHandler(_.paginationBtn.next))},B,8,C)):(0,s.kq)("",!0),_.paginationBtn.end?((0,s.wg)(),(0,s.iD)("li",{key:3,class:"page-item",id:"listViewEndButton_top",name:"listViewEndButton",title:t.DOAPP.utils.translate("LNK_LIST_END"),onClick:a[6]||(a[6]=t=>_.paginationHandler(_.paginationBtn.end))},I,8,S)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])],8,l)}var j=e(66321),x={name:"DashletCard",components:{daTable:j["default"]},props:{data:{type:Object},lockHomepage:{type:Boolean},activePage:{type:Number}},computed:{pageData(){return!this.DOAPP.utils.isEmpty(this.data.pageData)&&this.data.pageData},module(){return this.pageData&&this.pageData.bean?this.pageData.bean.moduleName:(console.error("Module name is not found"),!1)},viewData(){return this.data.viewData},paginationBtn(){let t={start:!1,previous:!1,next:!1,end:!1};return this.pageData.urls.startPage&&(t["start"]=this.pageData.urls.startPage),this.pageData.urls.prevPage&&(t["previous"]=this.pageData.urls.prevPage),this.pageData.urls.nextPage&&(t["next"]=this.pageData.urls.nextPage),this.pageData.urls.endPage&&Number(this.pageData.offsets.total)!==Number(this.pageData.offsets.lastOffsetOnPage)&&(t["end"]=this.pageData.urls.endPage),t}},methods:{retrieveDashlet(){let t={id:this.data.id,page_id:this.activePage,to_pdf:!0,entryPoint:"retrieve_dash_page"};this.$store.dispatch("focus/retrieveDashPage",t)},sortHandler(t){let a={},e="Home2_"+this.pageData.bean.objectName+"_ORDER_BY";a.entryPoint="retrieve_dash_page",a.id=this.data.id,a.page_id=this.activePage,a[e]=t,a.lvso=this.pageData.queries.orderBy.lvso,a.to_pdp=!0,this.$store.dispatch("focus/retrieveDashPage",a)},dataNotEmpty(){return!this.DOAPP.utils.isEmpty(this.viewData.data)},paginationInfo(){let t="";return t=0===this.pageData.offsets.lastOffsetOnPage?"0":1*this.pageData.offsets.current+1,t+=" - "+this.pageData.offsets.lastOffsetOnPage,t+=" "+this.DOAPP.utils.translate("LBL_LIST_OF")+" ",this.pageData.offsets.totalCounted?t+=this.pageData.offsets.total:(t+=this.pageData.offsets.total,this.pageData.offsets.lastOffsetOnPage!==this.pageData.offsets.total&&(t+="+")),t},paginationHandler(t){let a=decodeURI(t.substring(t.indexOf("?")+1)),e={},s=["module","action","DynamicAction","lvso"];a.split("&").forEach((t=>{let[a,i]=t.split("=");s.includes(a)||(e[a]=i)})),e.page_id=this.activePage,e.entryPoint="retrieve_dash_page",Object.hasOwn(e,"Home2_"+this.pageData.bean.objectName.toUpperCase()+"_"+this.data.id+"_offset")||(Number(e["Home2_"+this.pageData.bean.objectName.toUpperCase()+"_offset"])===Number(this.pageData.offsets.end)?e["Home2_"+this.pageData.bean.objectName.toUpperCase()+"_"+this.data.id+"_offset"]=this.pageData.offsets.end:e["Home2_"+this.pageData.bean.objectName.toUpperCase()+"_"+this.data.id+"_offset"]=this.pageData.offsets.next),this.$store.dispatch("focus/retrieveDashPage",e)},moduleIcon(){let t=!1;return this.pageData&&(t="suitepicon-module-"+this.pageData.bean.moduleDir.toLowerCase()),t},async configDashlets(){let{title:t,data:a}=await this.$store.dispatch("focus/retrieveDashlet",this.data.id);this.open_popup(t,a,"DashletConfig",this.saveDashletConfigHandler)},deleteDashlet(){this.DOAPP.swal.getConfirmToast({title:this.DOAPP.utils.translate("LBL_DASHLET_DELETE","Home"),text:this.DOAPP.utils.translate("LBL_REMOVE_DASHLET_CONFIRM","Home"),onConfirmed:this.deleteHandler})},deleteHandler(){this.$store.dispatch("focus/deleteDashletDialog",{activePage:this.activePage,id:this.data.id},{root:!0}),this.$store.dispatch("popup/hide")},async saveDashletConfigHandler(){let t=document.querySelector("form[id=dashletConfig]"),a=new FormData(t),e=new FormData;for(let i of a.entries())"date_entered"===i[0]||"date_start"===i[0]?e.append("type_"+i[0],i[1]):e.append(i[0],i[1]);let s={entryPoint:"retrieve_dash_page",id:this.data.id,page_id:this.activePage,to_pdp:!0};await this.$store.dispatch("ajaxPost",{data:e}),await this.$store.dispatch("focus/retrieveDashPage",s),this.$store.dispatch("popup/hide")},open_popup(t,a,e="",s){this.$store.dispatch("popup/setSize","lg"),this.$store.dispatch("popup/fill",{type:e,header:{show:!0,data:{title:t}},body:{show:!0,data:{data:a,module:this.module,record:this.data.id}},footer:{show:!0,data:{onConfirm:s}}}),this.$store.dispatch("popup/show")}}},$=e(40089);const q=(0,$.Z)(x,[["render",R]]);var V=q},21049:function(t,a,e){e.r(a),e.d(a,{default:function(){return y}});var s=e(73396),i=e(87139);const l=["id"],o=["id"],n={"data-dr-handle":"",class:"card-title"},d={class:"card-tools"},r=["title","aria-label"],p=(0,s._)("i",{class:"fas fa-cogs"},null,-1),h=[p],c=["title","aria-label"],u=(0,s._)("i",{class:"fas fa-sync-alt"},null,-1),D=[u],g=["title","aria-label"],_=(0,s._)("i",{class:"fas fa-times"},null,-1),f=[_],m={class:"card-body p-0"},b={class:"table-responsive"},v={class:"table"},P={scope:"col"},L={scope:"col"};function w(t,a,e,p,u,_){return(0,s.wg)(),(0,s.iD)("div",{id:t.data.id,class:"card"},[(0,s._)("div",{"data-dr-handle":"",class:"card-header",id:"dashlet_header_"+t.data.id},[(0,s._)("h3",n,[(0,s._)("i",{"data-dr-handle":"",class:(0,i.C_)(["mr-1 suitepicon",t.moduleIcon()])},null,2),(0,s.Uk)(" "+(0,i.zw)(t.data.label),1)]),(0,s._)("div",d,[t.lockHomepage?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-tool",title:t.DOAPP.utils.translate("LBL_DASHLET_EDIT","Home"),"aria-label":t.DOAPP.utils.translate("LBL_DASHLET_EDIT","Home"),onClick:a[0]||(a[0]=(...t)=>_.configDashlets&&_.configDashlets(...t))},h,8,r)),(0,s._)("button",{type:"button",class:"btn btn-tool",title:t.DOAPP.utils.translate("LBL_DASHLET_REFRESH","Home"),"aria-label":t.DOAPP.utils.translate("LBL_DASHLET_REFRESH","Home"),onClick:a[1]||(a[1]=(...a)=>t.retrieveDashlet&&t.retrieveDashlet(...a))},D,8,c),t.lockHomepage?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"btn btn-tool",title:t.DOAPP.utils.translate("LBL_DASHLET_DELETE","Home"),"aria-label":t.DOAPP.utils.translate("LBL_DASHLET_DELETE","Home"),onClick:a[2]||(a[2]=(...a)=>t.deleteDashlet&&t.deleteDashlet(...a))},f,8,g))])],8,o),(0,s._)("div",m,[(0,s._)("div",b,[(0,s._)("table",v,[(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",P,(0,i.zw)(t.viewData.displayColumns.lblTotalOpportunities),1),(0,s._)("th",L,(0,i.zw)(t.viewData.displayColumns.lblClosedWonOpportunities),1)])]),(0,s._)("tbody",null,[(0,s._)("tr",null,[(0,s._)("td",null,(0,i.zw)(t.viewData.data.totalOpportunities),1),(0,s._)("td",null,(0,i.zw)(t.viewData.data.totalOpportunitiesWon),1)])])])])])],8,l)}var E=e(72318),H={name:"MyClosedOpportunitiesDashlet",extends:E["default"],methods:{async configDashlets(){let{title:t,data:a}=await this.$store.dispatch("focus/retrieveDashlet",this.data.id);this.open_popup(t,a,"MyClosedOpportunitiesDashletConfig",this.saveDashletConfigHandler)}}},k=e(40089);const O=(0,k.Z)(H,[["render",w]]);var y=O}}]);