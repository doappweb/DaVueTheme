"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[5301,3265],{43265:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var a={name:"abstractActionPage",props:{windowSize:{type:[Object]}},provide(){return{view:"",state:"focus"}},mounted(){},methods:{}};const o=a;var i=o},75301:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var a=n(73396),o=n(87139);const i=(0,a._)("div",{class:"login-logo"},[(0,a._)("img",{src:"/../../themes/default/images/company_logo.png",alt:"SuiteCRM",style:{margin:"5px 0"}})],-1),s=(0,a._)("div",{class:"d-flex justify-content-center"},[(0,a._)("span",{id:"error",style:{color:"darkred",display:"none"}},"Вы должны указать правильные логин и пароль.")],-1),l={class:"card"},r={class:"card-body login-card-body"},u={role:"form",id:"form"},d=(0,a.uE)('<input type="hidden" name="module" value="Users"><input type="hidden" name="action" value="Authenticate"><input type="hidden" name="return_module" value="Users"><input type="hidden" name="return_action" value="Login"><input type="hidden" name="login_module" value=""><input type="hidden" name="login_action" value=""><input type="hidden" name="login_record" value=""><input type="hidden" name="login_token" value=""><input type="hidden" name="login_oauth_token" value=""><input type="hidden" name="login_mobile" value=""><input type="hidden" name="cant_login" value="" id="cant_login">',11),c={class:"input-group mb-3"},p={value:"en_us"},g={value:"ru_ru"},m=(0,a.uE)('<div class="input-group mb-3"><input type="text" class="form-control" placeholder="Username" required tabindex="1" id="user_name" name="user_name" autocomplete="off" autofocus><div class="input-group-append"><div class="input-group-text"><span class="fas fa-user"></span></div></div></div><div class="input-group mb-3"><input type="password" class="form-control" placeholder="Password" required tabindex="2" id="username_password" name="username_password" autocomplete="off"><div class="input-group-append"><div class="input-group-text"><span class="fas fa-lock"></span></div></div></div>',2),h=["title"];function _(e,t,n,_,v,f){return(0,a.wg)(),(0,a.iD)(a.HY,null,[i,s,(0,a._)("div",l,[(0,a._)("div",r,[(0,a._)("form",u,[d,(0,a._)("div",c,[(0,a._)("select",{onChange:t[0]||(t[0]=(...e)=>f.changeLang&&f.changeLang(...e)),class:"custom-select",name:"login_language"},[(0,a._)("option",p,(0,o.zw)(v.selectLanguages.en_us),1),(0,a._)("option",g,(0,o.zw)(v.selectLanguages.ru_ru),1)],32)]),m,(0,a._)("button",{type:"button",id:"bigbutton",class:"btn btn-block btn-primary",onClick:t[1]||(t[1]=(...e)=>f.postForm&&f.postForm(...e)),title:f.appLang.LNK_RESUME,tabindex:"3",name:"Login"},(0,o.zw)(f.appLang.LNK_RESUME),9,h)])])])],64)}var v=n(91076),f=n(43265),y={extends:f["default"],name:"ModUsersLoginActionPage",data(){return{loginModule:"",loginAction:"",selectLanguages:this.$store.state.app.config.languages}},computed:{appLang(){return"undefined"!==typeof this.$store.state.app.language?this.$store.state.app.language:{}},chosenLang(){return Object.hasOwn(window.sessionStorage,"lang")?window.sessionStorage.getItem("lang"):""}},mounted(){console.log("ModUsersLoginActionPage"),this.setSelect(this.chosenLang),this.$route.query.login_module&&this.$route.query.login_action&&(this.loginModule=`module=${this.$route.query.login_module}`,this.loginAction=`action=${this.$route.query.login_action}`)},methods:{setSelect(e){let t=document.querySelector("select[name=login_language]");t.childNodes.forEach((t=>{t.selected=t.value===e}))},async changeLang(e){let t=e.target.value;console.log("Press change language to ",t),window.sessionStorage.setItem("lang",t),this.$store.commit("app/SET_PAGE_READY",!1),await this.$store.dispatch("getLoginPage",{method:"getInstance",arg:{lang:t}}),console.log("Change language to ",t),this.$store.commit("app/SET_PAGE_READY",!0)},postForm(e){let t=new FormData(e.target.form);v.Z.post("../index.php",t).then((e=>{let t=e.data.split("=data="),n=t.filter((e=>!e.includes("%%%%%%"))),a=JSON.parse(n.join(""));if(!a.app_auth)return document.querySelector("#error").style.display="inline";this.redirect()}))},redirect(){if(this.loginModule&&this.loginAction)return location.replace(`./?${this.loginModule}&${this.loginAction}`);location.replace("./?module=Home&action=ListView")}}},w=n(40089);const b=(0,w.Z)(y,[["render",_]]);var L=b}}]);