"use strict";(self["webpackChunkdoapp_crmtheme"]=self["webpackChunkdoapp_crmtheme"]||[]).push([[8240,1486,4732],{31486:function(e,t,i){i.r(t),i.d(t,{default:function(){return E}});var n=i(73396),l=i(87139);const a=["data-type","data-field"],d={class:"text-muted font-weight-bold"},s={key:0,class:"d-block"},r={key:1,class:"d-block"};function o(e,t,i,o,c,u){return(0,n.wg)(),(0,n.iD)("div",{class:(0,l.C_)(["mb-3",u.widthClass]),"data-type":u.fieldDef.type,"data-field":i.name},[(0,n._)("span",d,[(0,n.Uk)((0,l.zw)(e.DOAPP.utils.translate(u.resolveFieldLBL(i.metadata.field.label),i.module))+" ",1),u.inlineEditSet()&&!c.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:0,class:"bi bi-pencil-square ml-2",onClick:t[0]||(t[0]=(...e)=>u.inlineEditInitBtn&&u.inlineEditInitBtn(...e)),role:"button"})):(0,n.kq)("",!0),c.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:1,class:"bi bi-check-circle-fill text-success ml-2",onClick:t[1]||(t[1]=(...e)=>u.inlineEditSaveBtn&&u.inlineEditSaveBtn(...e)),role:"button"})):(0,n.kq)("",!0),c.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:2,class:"bi bi-x-circle-fill text-danger ml-2",onClick:t[2]||(t[2]=(...e)=>u.inlineEditCancelBtn&&u.inlineEditCancelBtn(...e)),role:"button"})):(0,n.kq)("",!0)]),c.inlineEdit.run?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",s,(0,l.zw)(u.value),1)),c.inlineEdit.run||u.value?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",r,"—")),c.inlineEdit.run?((0,n.wg)(),(0,n.j4)((0,n.LL)(u.inlineEditSet()),{key:2,ref:"inlineEdit",name:i.name,module:i.module,record:i.record,metadata:i.metadata,beanData:i.beanData},null,8,["name","module","record","metadata","beanData"])):(0,n.kq)("",!0)],10,a)}var c=i(85697),u={name:"FieldName",widgetCols:1,props:{name:{type:String},module:{type:String},record:{type:String},metadata:{type:Object},beanData:{type:Object},sideBlock:{type:Boolean},accessEdit:{type:Boolean}},data(){return{inlineEdit:{tpl:!1,run:!1,temp:{}}}},computed:{fieldDef(){return this.beanData[this.name]},displayParams(){let e={};return Object.hasOwn(this.metadata.field,"displayParams")&&(e=this.metadata.field.displayParams),e},widthClass(){let e=this.$options.widgetCols;this.sideBlock&&(e=2*this.$options.widgetCols);let t=6*e,i=3*e;return t>=12&&(t=12),i>=12&&(i=12),"col-md-"+t+" col-lg-"+i},value(){return this.DOAPP.utils.htmlDecode(this.fieldDef.value)}},methods:{inlineEditSet(){return!(!this.accessEdit||!1===this.fieldDef.inline_edit)&&c["default"][this.inlineEdit.tpl]},inlineEditInitBtn(){this.inlineEdit.run=!0;let e=setInterval((()=>{this.$refs.inlineEdit&&(clearInterval(e),this.inlineEdit.temp=this.$refs.inlineEdit.localStorage.temp)}),50);setTimeout((()=>{clearInterval(e)}),1e3)},inlineEditCancelBtn(){let e=this.inlineEdit.temp;for(let t in e)this.$store.dispatch("focus/updateModelValue",{name:t,value:e[t]});this.inlineEdit.run=!1,this.inlineEdit.temp={}},inlineEditSaveBtn(){if(this.$refs.inlineEdit.validation.error)return void console.log("validation error");let e=this.$refs.inlineEdit.inlineEditForm(),t={module:"Home",action:"saveHTMLField",current_module:this.module,id:this.record,view:"DetailView",to_pdf:!0};for(let i of e.entries())t["field"]=i[0],t["value"]=i[1],i[1]!==this.inlineEdit.temp[i[0]]&&this.$store.dispatch("ajaxGet",{get:t});this.inlineEdit.run=!1,this.inlineEdit.temp={}},resolveFieldLBL(e){return void 0===e&&(e=this.fieldDef.vname),e}}},m=i(40089);const h=(0,m.Z)(u,[["render",o]]);var E=h},78240:function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var n=i(73396),l=i(87139);const a=["data-type","data-field"],d={class:"text-muted font-weight-bold"},s={key:0,id:"html_div",class:"pt-2"},r=["id"],o={key:1,id:"text_div"},c={class:"pre-field",style:{"white-space":"pre-wrap"}};function u(e,t,i,u,m,h){return(0,n.wg)(),(0,n.iD)("div",{class:(0,l.C_)(["mb-3",e.widthClass]),"data-type":e.fieldDef.type,"data-field":e.name},[(0,n._)("span",d,[(0,n.Uk)((0,l.zw)(e.DOAPP.utils.translate(e.resolveFieldLBL(e.metadata.field.label),e.module))+" ",1),e.inlineEditSet()&&!e.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:0,class:"bi bi-pencil-square ml-2",onClick:t[0]||(t[0]=(...t)=>e.inlineEditInitBtn&&e.inlineEditInitBtn(...t)),role:"button"})):(0,n.kq)("",!0),e.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:1,class:"bi bi-check-circle-fill text-success ml-2",onClick:t[1]||(t[1]=(...t)=>e.inlineEditSaveBtn&&e.inlineEditSaveBtn(...t)),role:"button"})):(0,n.kq)("",!0),e.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:2,class:"bi bi-x-circle-fill text-danger ml-2",onClick:t[2]||(t[2]=(...t)=>e.inlineEditCancelBtn&&e.inlineEditCancelBtn(...t)),role:"button"})):(0,n.kq)("",!0)]),e.inlineEdit.run?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("iframe",{id:"html_frame_"+this.name,src:"",class:"w-100"},null,8,r)])),(0,n._)("button",{type:"button",class:"bg-primary btn btn-flat mt-2 mb-2",onClick:t[3]||(t[3]=e=>h.toggle())},(0,l.zw)(this.DOAPP.utils.translate(h.lbl,this.module)),1),m.show?((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("pre",c,(0,l.zw)(e.beanData.body.value),1)])):(0,n.kq)("",!0),e.inlineEdit.run?((0,n.wg)(),(0,n.j4)((0,n.LL)(e.inlineEditSet()),{key:2,ref:"inlineEdit",name:e.name,module:e.module,record:e.record,metadata:e.metadata,beanData:e.beanData},null,8,["name","module","record","metadata","beanData"])):(0,n.kq)("",!0)],10,a)}var m=i(44732),h={name:"EmailTemplatesBodyHtmlField",extends:m["default"],data(){return{show:!1}},computed:{lbl(){return this.show?"LBL_HIDE_ALT_TEXT":"LBL_SHOW_ALT_TEXT"}},methods:{toggle(){this.show?this.show=!1:this.show=!0}}},E=i(40089);const f=(0,E.Z)(h,[["render",u]]);var p=f},44732:function(e,t,i){i.r(t),i.d(t,{default:function(){return f}});var n=i(73396),l=i(87139);const a=["data-type","data-field"],d={class:"text-muted font-weight-bold"},s=["id"],r=["id"],o={key:1,class:"d-block"};function c(e,t,i,c,u,m){return(0,n.wg)(),(0,n.iD)("div",{class:(0,l.C_)(["mb-3",e.widthClass]),"data-type":e.fieldDef.type,"data-field":e.name},[(0,n._)("span",d,[(0,n.Uk)((0,l.zw)(e.DOAPP.utils.translate(e.resolveFieldLBL(e.metadata.field.label),e.module))+" ",1),e.inlineEditSet()&&!e.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:0,class:"bi bi-pencil-square ml-2",onClick:t[0]||(t[0]=(...t)=>e.inlineEditInitBtn&&e.inlineEditInitBtn(...t)),role:"button"})):(0,n.kq)("",!0),e.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:1,class:"bi bi-check-circle-fill text-success ml-2",onClick:t[1]||(t[1]=(...t)=>e.inlineEditSaveBtn&&e.inlineEditSaveBtn(...t)),role:"button"})):(0,n.kq)("",!0),e.inlineEdit.run?((0,n.wg)(),(0,n.iD)("i",{key:2,class:"bi bi-x-circle-fill text-danger ml-2",onClick:t[2]||(t[2]=(...t)=>e.inlineEditCancelBtn&&e.inlineEditCancelBtn(...t)),role:"button"})):(0,n.kq)("",!0)]),e.inlineEdit.run?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",{key:0,id:"html_div"+e.name,class:"pt-2 d-block"},[e.inlineEdit.run?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("iframe",{key:0,id:"html_frame_"+e.name,src:"",class:"w-100"},null,8,r))],8,s)),e.inlineEdit.run||e.value?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",o,"—")),e.inlineEdit.run?((0,n.wg)(),(0,n.j4)((0,n.LL)(e.inlineEditSet()),{key:2,ref:"inlineEdit",name:e.name,module:e.module,record:e.record,metadata:e.metadata,beanData:e.beanData},null,8,["name","module","record","metadata","beanData"])):(0,n.kq)("",!0)],10,a)}var u=i(31486),m={name:"HtmlField",extends:u["default"],widgetCols:4,computed:{mode(){return this.$store.state.app.setting.theme.darkMode}},methods:{decodeHTML(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}},mounted(){let e="html_frame_"+this.name;document.getElementById(e).contentWindow.document.write(this.decodeHTML(this.value)),this.$store.state.app.setting.theme.darkMode&&(document.getElementById(e).contentDocument.body.style.color="white")},watch:{mode(e){document.getElementById("html_frame_"+this.name).contentDocument.body.style.color=e?"white":"unset"}}},h=i(40089);const E=(0,h.Z)(m,[["render",c]]);var f=E}}]);